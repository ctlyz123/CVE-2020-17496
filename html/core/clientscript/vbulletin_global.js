/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.6.0
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2020 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
function vBRedirect(A){var B=A.split(":",1)[0];if(A.substring(0,2)!="//"&&(["http","https","mailto","javascript"].indexOf(B)==-1)){A=getBaseUrl()+A}window.location=A}function construct_phrase(){if(!arguments||arguments.length<1){return false}var A=arguments,C=A[0];for(var B=1;B<A.length;B++){C=C.replace(new RegExp("%"+B+"\\$s","gi"),A[B])}return C}function isFullScreen(A){return/\bCodeMirror-fullscreen\b/.test(A.getWrapperElement().className)}function winHeight(){return window.innerHeight||(document.documentElement||document.body).clientHeight}function setFullScreen(A,C){var D=A.getWrapperElement();if(C){D.className+=" CodeMirror-fullscreen";D.style.height=winHeight()+"px";document.documentElement.style.overflow="hidden"}else{D.className=D.className.replace(" CodeMirror-fullscreen","");D.style.height="";document.documentElement.style.overflow=""}updateCodeMirrorWidth();var B=$(D).find("textarea");window.scrollTo(0,B.offset()["top"]);B.focus();A.refresh()}function updateCodeMirrorWidth(){var B=$(".CodeMirror-wrap"),D=B.closest("#ctrl_template"),A=($(".CodeMirror-fullscreen").length>0);if(B.length<1||D.length<1){return }if(A){B.css("width","")}else{var C=$("<div />").text(new Array(5000).join("a ")).appendTo(D);B.hide();B.width(D.innerWidth());B.show();C.remove()}}function setUpCodeMirror(F){CodeMirror.on(window,"resize",function(){updateCodeMirrorWidth();var H=document.body.getElementsByClassName("CodeMirror-fullscreen")[0];if(H){H.CodeMirror.getWrapperElement().style.height=winHeight()+"px"}});var D=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder);var A=document.getElementById(F.textarea_id);var E=CodeMirror.fromTextArea(A,{mode:F.mode,lineNumbers:true,matchBrackets:true,autoCloseBrackets:true,autoCloseTags:true,tabMode:"indent",indentUnit:4,tabSize:4,electricChars:false,smartIndent:true,indentWithTabs:true,autoClearEmptyLines:true,lineWrapping:true,highlightSelectionMatches:true,styleActiveLine:true,extraKeys:{"Ctrl-Q":function(H){D(H,H.getCursor().line)},"Ctrl-Space":"autocomplete",F11:function(H){setFullScreen(H,!isFullScreen(H))},Esc:function(H){if(isFullScreen(H)){setFullScreen(H,false)}}}});var C=$(A).attr("dir");if(C){$(E.display.wrapper).attr("dir",C)}updateCodeMirrorWidth();E.on("gutterClick",D);var G=$(A).siblings(".sizetools");$("a",G).hide();$('<a class="fullscreen" href="#">'+F.phrase_fullscreen+"</a>").appendTo(G).on("click",function(){setFullScreen(E,true);return false});var B=$(A).parents("form");B.find("input.searchstring").val(B.find('input[name="searchstring"]').val());B.find("input.findbutton").on("click",function(){var H=E.getSearchCursor(B.find("input.searchstring").val(),E.getCursor(),true);H.find();if(H.atOccurrence){E.setCursor(H.to());E.setSelection(H.from(),H.to())}})}(function(D){function C(){function F(){return !D(".js-adminmessage-dismissmultiple:not(:checked)").length}function H(){var J=!D(".js-adminmessage-dismissmultiple:checked").length;D(".js-adminmessage-dismissmultiple-submit").prop("disabled",J)}function G(){D(".js-adminmessage-dismissmultiple").prop("checked",!F());H()}function I(){D(".js-adminmessage-dismissmultiple-toggle").prop("checked",F());H()}D(".js-adminmessage-dismissmultiple-toggle").off("change",G).on("change",G);D(".js-adminmessage-dismissmultiple").off("change",I).on("change",I)}function E(){D(".js-autocheck-master").each(function(){var F=D(this);F.on("focus",function(){D(document).find(F.data("on")).prop("checked",true)})})}function B(){D(".js-image-upload-update-preview").on("change vb-init",function(H){var M=D(this),I=M.attr("name"),L=D('.js-channel-icon-preview-wrapper[data-for="'+I+'"]'),G=D('img[data-for="'+I+'"]'),J=D('.js-image-upload-remove[data-for="'+I+'"]'),K=D('.js-image-upload-revert[data-for="'+I+'"]'),F;if(typeof FileReader!="undefined"){F=new FileReader();F.onload=function(N){G.attr("src",N.target.result);L.toggleClass("hide",false);J.prop("disabled",false);if(K.length){K.prop("disabled",false)}};if(this.files.length>0){F.readAsDataURL(this.files[0])}}});D(".js-image-upload-update-preview").trigger("vb-init");D(".js-image-upload-remove").click(function(){var H=D(this),G=H.data("for"),L=G&&D('.js-image-upload-revert[data-for="'+G+'"]'),K=G&&D('input[name="'+G+'"]'),J=G&&D('.js-image-upload-filedataid[data-for="'+G+'"]'),I=D('.js-channel-icon-preview-wrapper[data-for="'+G+'"]'),F=G&&D('img[data-for="'+G+'"]');K.val("");J.val("0");F.attr("src","");I.toggleClass("hide",true);if(L.length){L.prop("disabled",false)}H.prop("disabled",true)});D(".js-image-upload-revert").click(function(){var L=D(this),G=L.data("for"),H=G&&D('.js-image-upload-remove[data-for="'+G+'"]'),K=G&&D('input[name="'+G+'"]'),J=G&&D('.js-image-upload-filedataid[data-for="'+G+'"]'),I=D('.js-channel-icon-preview-wrapper[data-for="'+G+'"]'),F=G&&D('img[data-for="'+G+'"]');K.val("");J.val(J.data("orig-value"));F.attr("src",F.data("orig-src"));I.toggleClass("hide",false);L.prop("disabled",true);H.prop("disabled",false)})}function A(){function F(J){for(var K=0;K<2&&J.parent;++K){var L=J.parent;if(L.frames&&L.frames.length&&L.frames.head){return L.frames.head}J=L}return false}var H=F(window);if(H){H.parent.document.title=(document.title!=""?document.title:"vBulletin");var G=D(".js-admincp-data"),I=H.document;D(".js-debug-warning-message",I).toggleClass("hide",!G.data("debug"));D(".js-siteoff-warning-message",I).toggleClass("hide",!G.data("siteoff"))}}D(document).ready(function(){A();E();B();C()})})(jQuery);