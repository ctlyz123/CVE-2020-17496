/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.6.0
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2020 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
(function(E){var V=0;function F(){var X=N();if(X.allGroupsCollapsed){T(true)}}function T(X){J(E(".js-varlist-optgroup"),X)}function J(Y,X){Y.each(function(){var a=E(this),Z=a.prop("label");a.find("option").toggleClass("h-hide-imp",!X);if(X){Z=a.data("label-expanded")}else{Z=a.data("label-collapsed")}a.prop("label",Z)});C()}function C(){var X=N();E(".js-stylevar-editor__toggle-all-groups").removeClass("toggle-link-selected");if(X.allGroupsExpanded){E(".js-stylevar-editor__toggle-all-groups.js-toggle-expand-all").addClass("toggle-link-selected")}else{if(X.allGroupsCollapsed){E(".js-stylevar-editor__toggle-all-groups.js-toggle-collapse-all").addClass("toggle-link-selected")}}}function N(){var X=true,Y=true;E(".js-varlist-optgroup:visible").each(function(){var Z=(E(this).find(".js-varlist-option:visible").length>0);if(Z){X=false}else{Y=false}});return{allGroupsCollapsed:X,allGroupsExpanded:Y}}function B(){E(".js-stylevar-editor__text-filter").val("");M()}function A(){E(".js-stylevar-editor__customized-filter").prop("checked",false);M()}function O(){E(".js-hidden-by-text-search:not(.js-hidden-by-iscustomized-filter)").removeClass("h-hide-imp js-hidden-by-text-search");E(".js-hidden-by-text-search.js-hidden-by-iscustomized-filter").removeClass("js-hidden-by-text-search");E(".js-stylevar-editor__clear-text-filter").addClass("h-hide-imp")}function H(){E(".js-hidden-by-iscustomized-filter:not(.js-hidden-by-text-search)").removeClass("h-hide-imp js-hidden-by-iscustomized-filter");E(".js-hidden-by-iscustomized-filter.js-hidden-by-text-search").removeClass("js-hidden-by-iscustomized-filter")}function P(){E(".js-varlist-optgroup").removeClass("h-hide-imp")}function M(){var X=E(".js-stylevar-editor__text-filter"),a=X.val().toLowerCase(),Y=E(".js-stylevar-editor__customized-filter"),Z=Y.prop("checked");O();H();P();if(a==""&&!Z){return false}T(true);if(a!=""){E(".js-stylevar-editor__clear-text-filter").removeClass("h-hide-imp");E(".js-varlist-option").each(function(){var c=E(this),d=c.data("search-text"),b=d.indexOf(a)!=-1;if(!b){c.addClass("h-hide-imp js-hidden-by-text-search").prop("selected",false)}})}if(Z){E(".js-varlist-option:not(.col-c):not(.col-i)").addClass("h-hide-imp js-hidden-by-iscustomized-filter").prop("selected",false)}E(".js-varlist-optgroup").each(function(){var b=E(this),c=(b.find(".js-varlist-option:visible").length==0);if(c){b.addClass("h-hide-imp")}});L();C()}function L(){var Y=[],X="";E(".js-varlist-option").each(function(){var Z=E(this);if(Z.prop("selected")){Y.push("stylevarid[]="+Z.prop("value"))}});if(Y.length>0){Y.push("securitytoken="+SECURITYTOKEN);Y.push("adminhash="+ADMINHASH);Y.push("do=fetchstylevareditor");Y.push("dostyleid="+E(".js-stylevar-editor-data").data("dostyleid"));X="admincp/stylevar.php?"+Y.join("&")}E(".js-edit-scroller").prop("src",X)}function K(Z){var Y=E(this),X=Y.data("action")=="expand-all";if(!X){B();A();E(".js-varlist-option").prop("selected",false);L()}T(X);if(X){I.call(E(".js-stylevar-editor__text-filter"));S.call(E(".js-stylevar-editor__customized-filter"))}return false}function I(X){if(V){window.clearTimeout(V);V=0}if(!X||(X.keyCode&&X.keyCode==13)){M()}else{V=window.setTimeout(function(){V=0;M()},50)}return false}function D(X){B();return false}function S(X){M()}function Q(b){var Y=E(this),X=Y.find(".js-varlist-option:visible"),Z,a;if(X.length<1){J(Y,true);X=Y.find(".js-varlist-option:visible")}Z=true;X=Y.find(".js-varlist-option:visible");X.each(function(){if(!E(this).prop("selected")){Z=false;return false}});a=(b.ctrlKey||b.metaKey);if(!a){E(".js-varlist-option").prop("selected",false)}if(Z){X.prop("selected",false);J(Y,false)}else{X.prop("selected",true)}M();L();return false}function U(X){L();return false}function W(){E(".js-varlist-option").each(function(){var X=E(this),Y=X.text().toLowerCase();X.data("search-text",Y)})}function G(){E(".js-stylevar-editor__toggle-all-groups").off("click",K).on("click",K);E(".js-stylevar-editor__text-filter").off("keyup",I).on("keyup",I);E(".js-stylevar-editor__clear-text-filter").off("click",D).on("click",D);E(".js-stylevar-editor__customized-filter").off("click",S).on("click",S);E(".js-varlist-optgroup").off("click",Q).on("click",Q);E(".js-varlist-option").off("click",U).on("click",U);E(".js-stylevar-editor__toggle-all-groups.toggle-link-selected").click();W()}function R(){E(G)}R()})(jQuery);