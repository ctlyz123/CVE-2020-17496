/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.6.0
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2020 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
(function(D){D(".js-module__hide-if-empty:not(:has(*))").each(function(){var J=D(this);if(/\s/.test(J.html())){J.closest(".js-module").hide()}});jQuery.ajaxPrefilter(function(J){if(J.crossDomain){J.contents.script=false}});D.ajaxPrefilter("script",function(J){J.cache=true});window.vBulletin.normalizeAjaxUrl=function(J){if(J.indexOf("http://")==0){return J.substring(5)}else{if(J.indexOf("https://")==0){return J.substring(6)}else{return J}}};window.vBulletin.getAjaxBaseurl=function(){return window.vBulletin.normalizeAjaxUrl(pageData.baseurl)};vBulletin.getAbsoluteUrl=(function(){var J;return function(K){if(!J){J=document.createElement("a")}J.href=K;return J.href}})();vBulletin.regexEscape=function(J){return J.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};vBulletin.isInternalUrl=(function(){var J=vBulletin.normalizeAjaxUrl(pageData.baseurl),K=new RegExp("^"+vBulletin.regexEscape(J));return function(L){L=vBulletin.normalizeAjaxUrl(vBulletin.getAbsoluteUrl(L));return K.test(L)}})();vBulletin.isInternalJSUrl=(function(){var J=vBulletin.normalizeAjaxUrl(pageData.baseurl),K=new RegExp("^"+vBulletin.regexEscape(J+"/js/")+".*.js");return function(L){L=vBulletin.normalizeAjaxUrl(vBulletin.getAbsoluteUrl(L));return K.test(L)}})();vBulletin.isAbsoluteUrl=(function(){var J=new RegExp("^(?:[a-z]+:)?//","i");return function(K){return J.test(K)}})();vBulletin.isEmptyList=function(J){return((D.isArray(J)&&J.length==0)||(D.isPlainObject(J)&&D.isEmptyObject(J)))};D.ajaxPrefilter(function(J,N,L){if(J.url){if(!vBulletin.isInternalUrl(J.url)){console.log("Skipping security token for external url: "+J.url);return }else{if(vBulletin.isInternalJSUrl(J.url)){console.log("Skipping security token for javascript file: "+J.url);return }}}if(typeof (J.data)=="undefined"){J.data="securitytoken="+pageData.securitytoken;if(typeof J.formData!=="undefined"){if(Array.isArray(J.formData)){J.formData.push({name:"securitytoken",value:pageData.securitytoken})}}}else{if(typeof FormData!=="undefined"&&J.data instanceof FormData){J.data.append("securitytoken",pageData.securitytoken)}else{var K=true;var M=J.data.split("&");D.each(M,function(O,P){if(P.match(/^securitytoken=/)){K=false;return false}});if(K){J.data+="&securitytoken="+pageData.securitytoken}}}});D.ajaxPrefilter(function(J,L,K){(function(){var N=vBulletin.getAjaxBaseurl();if((L.url.indexOf(N)==0&&L.url.substr(N.length).indexOf("/ajax/render/")==0)||(L&&L.data&&L.data.isAjaxTemplateRender)){var M=J.success;J.success=function(){console.log("Intercept AJAX template render calls: Start (URL: {0})".format(J.url));var T=arguments[0];if(!T||typeof T!="object"||D.isEmptyObject(T)){if(typeof M=="function"){return M.apply(this,arguments)}return false}if(L.data&&L.data.isAjaxTemplateRenderWithData){arguments[0]=T}else{arguments[0]=T.template;arguments[1]=T.errors}var Y=T.css_links;if(!Y||Y.length==0){console.log("Intercept AJAX template render calls: No CSS");if(typeof M=="function"){console.log("Intercept AJAX template render calls: Calling original success handler");return M.apply(this,arguments)}}else{console.log("Intercept AJAX template render calls: Has CSS");var S=/sheet=([^&]+)&/,a=Y.pop(),V=(a.match(S)!=null);Y.push(a);var O=function(c){var d=c.match(S);var b={};if(d&&d[1]){D.each(d[1].split(","),function(e,f){b[f]=c})}else{b[c.replace(/^.*\//g,"")]=c}return b};var U={};D("head link[rel=stylesheet]").each(function(){D.extend(U,O(D(this).attr("href")))});var X={};D.each(Y,function(b,c){D.extend(X,O(c))});var Z=[];D.each(X,function(b,c){if(b&&typeof U[b]=="undefined"){if(V){Z.push(b)}else{Z.push(c)}}});if(Z.length==0){console.log("Intercept AJAX template render calls: Needed CSS is already on the page");if(typeof M=="function"){console.log("Intercept AJAX template render calls: Calling original success handler");return M.apply(this,arguments)}}else{var Q=[];if(V){console.log("Intercept AJAX template render calls: found DB CSS");Q.push(a.replace(/sheet=[^&]+&/,"sheet="+Z.join(",")+"&"))}else{console.log("Intercept AJAX template render calls: found FS CSS");Q=Z}var P=this,W=arguments;console.log("Intercept AJAX template render calls: Fetching CSS: {0}".format(Q.join(", ")));var R=function(c){if(c.length==0){console.log("Intercept AJAX template render calls: Done. Calling original callback.");window.setTimeout(function(){if(typeof M=="function"){return M.apply(P,W)}},50);return }var b=D("<div />").append(c.shift()).text();console.log("Intercept AJAX template render calls: Fetching CSS file: {0}".format(b));D.get(b,{cache:true},function(e){var d=D("<link />",{rel:"stylesheet",type:"text/css",href:b}),f=D(".js-additional-css");if(f.length==1){f.before(d)}else{D("head").append(d)}}).then(function(){console.log("Intercept AJAX template render calls: Fetched CSS file: {0}".format(b));if(D(".js-debug-css-template-list").length>0){var e=O(b),d=D("<ol />");D.each(e,function(h,j){if(V){d.append(D("<li />").append(h))}else{d.append(D("<li />").append(j))}});var f=D(".js-debug-css-template-list").append(D("<li />").append(vBulletin.phrase.get("added_via_ajax_call")+":").append(d));var g=f.prev("b");g.text(parseInt(g.text(),10)+1)}R(c)},function(){console.warn("Intercept AJAX template render calls: Failed to fetch CSS file: {0}".format(b));R(c)})};R(Q)}}}}})()});String.prototype.format=function(){var K=this,J=arguments.length;while(J--){K=K.replace(new RegExp("\\{"+J+"\\}","gm"),arguments[J])}return K};jQuery.fn.reverse=[].reverse;window.vBulletin=window.vBulletin||{};vBulletin.getStackTrace=function(){var J=new Error();return J.stack};vBulletin.isRtl=function(){return(D("html").attr("dir")=="rtl")};vBulletin.storagetools=vBulletin.createStorageTools(pageData.cookie_prefix);(function(){if(typeof D.cookie.defaults=="object"){var J=false;if(typeof pageData.baseurl!="undefined"){J=(pageData.baseurl.substr(0,5).toLowerCase()=="https")}D.cookie.defaults.secure=J}})();vBulletin.cookie=vBulletin.cookie||{};vBulletin.cookie.convertBbarrayCookie=function(K,J){K=K||"";J=J||"get";if(J=="set"){K=K.replace(/"/g,".");K=K.replace(/:/g,"-");K=K.replace(/;/g,"_")}else{K=K.replace(/\./g,'"');K=K.replace(/-/g,":");K=K.replace(/_/g,";")}return K};vBulletin.cookie.fetchBbarrayCookie=function(J,M){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var K=D.cookie(pageData.cookie_prefix+J);if(K!=""&&!vBulletin.cookie.bbarraycookiecache[J]){try{vBulletin.cookie.bbarraycookiecache[J]=D.parseJSON(vBulletin.cookie.convertBbarrayCookie(K))}catch(L){vBulletin.cookie.bbarraycookiecache[J]=null}}if(vBulletin.cookie.bbarraycookiecache[J]){return vBulletin.cookie.bbarraycookiecache[J][M]?vBulletin.cookie.bbarraycookiecache[J][M]:null}else{return null}};vBulletin.cookie.setBbarrayCookie=function(J,P,L,N){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var K=D.cookie(pageData.cookie_prefix+J);if(K!=""&&!vBulletin.cookie.bbarraycookiecache[J]){try{vBulletin.cookie.bbarraycookiecache[J]=D.parseJSON(vBulletin.cookie.convertBbarrayCookie(K))}catch(M){vBulletin.cookie.bbarraycookiecache[J]=null}}if(!vBulletin.cookie.bbarraycookiecache[J]){vBulletin.cookie.bbarraycookiecache[J]={}}vBulletin.cookie.bbarraycookiecache[J][P]=L;var O={path:pageData.cookie_path,domain:pageData.cookie_domain};if(N){O.expires=365}D.cookie(pageData.cookie_prefix+J,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[J]),"set"),O)};vBulletin.cookie.unsetBbarrayCookie=function(J,N){if(typeof vBulletin.cookie.bbarraycookiecache=="undefined"){vBulletin.cookie.bbarraycookiecache={}}var K=D.cookie(pageData.cookie_prefix+J);if(K!=""&&!vBulletin.cookie.bbarraycookiecache[J]){try{vBulletin.cookie.bbarraycookiecache[J]=D.parseJSON(vBulletin.cookie.convertBbarrayCookie(K))}catch(L){vBulletin.cookie.bbarraycookiecache[J]=null}}if(!vBulletin.cookie.bbarraycookiecache[J]||!vBulletin.cookie.bbarraycookiecache[J][N]){return }delete vBulletin.cookie.bbarraycookiecache[J][N];var M={path:pageData.cookie_path,domain:pageData.cookie_domain};D.cookie(pageData.cookie_prefix+J,vBulletin.cookie.convertBbarrayCookie(JSON.stringify(vBulletin.cookie.bbarraycookiecache[J]),"set"),M)};jQuery.fn.swipeable=function(K){K=K||{};if(typeof K=="object"){K.swiping=K.swiping||function(){};K.swipeend=K.swipeend||function(){};K.swipeleft=K.swipeleft||function(){};K.swiperight=K.swiperight||function(){};K.swipeup=K.swipeup||function(){};K.swipedown=K.swipedown||function(){}}var R=false,T=false,Q={start:null,previous:null,current:null,moved:null,totalMoved:null,target:null,};function S(V){var U={x:0,y:0};try{U={x:V.pageX||V.originalEvent.touches[0].pageX||0,y:V.pageY||V.originalEvent.touches[0].pageY||0,}}catch(V){}return U}function O(U,V){return{x:U.x-V.x,y:U.y-V.y,}}function M(){if(!Q.totalMoved){return false}var Y=40,X=Math.abs(Q.totalMoved.x),W=Math.abs(Q.totalMoved.y),V=Math.max(X,W),U=Math.min(X,W);if(V<Y){return false}if(V<=(U*2)){return false}if(X>W){return Q.totalMoved.x<0?"left":"right"}else{return Q.totalMoved.y<0?"up":"down"}}function P(U){R=true;T=false;Q.start=S(U);Q.previous=S(U);Q.current=S(U);Q.moved={x:0,y:0};Q.totalMoved={x:0,y:0};Q.target=U.target;if(U.type!="touchstart"){U.preventDefault()}}function N(U){if(R){Q.current=S(U);Q.moved=O(Q.current,Q.previous);Q.totalMoved=O(Q.current,Q.start);if(Q.moved.x||Q.moved.y){T=true}K.swiping.call(this,U,Q);Q.previous=Q.current}}function J(U){if(R){if(U.type=="mouseup"&&U.target!=Q.target){L.call(this,U)}else{if(U.type=="mouseleave"){L.call(this,U)}}}R=false;U.preventDefault()}function L(W){var U=M();if(U){var V="swipe"+U;K[V].call(this,W,Q)}K.swipeend.call(this,W,Q);R=false;Q={start:null,previous:null,current:null,moved:null,totalMoved:null,target:null,};if(T){T=false;return false}}return this.each(function(){var U=D(this);if(K=="disable"){U.off(".vbswipeable","body")}else{U.on("mousedown.vbswipeable touchstart.vbswipeable","body",P).on("mousemove.vbswipeable touchmove.vbswipeable","body",N).on("mouseup.vbswipeable mouseleave.vbswipeable touchcancel.vbswipeable","body",J).on("click.vbswipeable touchend.vbswipeable","body",L)}})};D.widget("ui.dialog",D.ui.dialog,{_allowInteraction:function(J){if(this._super(J)){return true}if(J.target.ownerDocument!=this.document[0]){return true}if(D(J.target).closest(".cke_dialog").length){return true}if(D(J.target).closest(".cke").length){return true}}});(function(){var J=jQuery.fn.dialog;jQuery.fn.dialog=function(){if(typeof arguments[0]=="object"){var K=function(){};if(typeof arguments[0].open=="function"){K=arguments[0].open}arguments[0].open=function(){var M=D(this);window.setTimeout(function(){vBulletin.Responsive.Debounce.runCallbacks();M.closest(".ui-dialog").find(".ui-dialog-titlebar-close .ui-icon").removeClass("ui-icon ui-icon-closethick").addClass("b-icon b-icon__x-square--gray")},0);M.closest(".ui-dialog").find(".ui-dialog-content").removeClass("h-hide");return K.apply(this,arguments)};var L=function(){};if(typeof arguments[0].close=="function"){L=arguments[0].close}arguments[0].close=function(){D(this).closest(".ui-dialog").find(".ui-dialog-content").addClass("h-hide");return L.apply(this,arguments)}}return J.apply(this,arguments)}})();(function(){var J=jQuery.fn.selectBox;jQuery.fn.selectBox=function(){var K=D(this);if(typeof K.attr("tabindex")=="undefined"){K.attr("tabindex","0")}var L=J.apply(this,arguments);D(".selectBox-arrow").addClass("b-icon b-icon__arrow-down-s");return L}})();(function C(){(function(){var J=D(".js-login-menu");J.find(".js-comp-menu-dropdown__trigger").on("click",function(){setTimeout(function(){J.find(".js-login-username").focus()},0)});(function(){var Q=D(".js-top-menu-user--list"),K=[".js-header__notifications-label",".js-pmchat__messages-label",".js-menu__username-label"],O=K.slice(0).reverse();function N(){var R=vBulletin.Responsive.Debounce.checkElementShrinkRequirement(Q);return R=="need_shrink"}function L(R,S){D(R).toggleClass("h-hide-imp",!S)}function M(){D.each(K,function(S,R){L(R,false);if(!N()){return false}})}function P(){D.each(O,function(S,R){L(R,true);if(N()){L(R,false);return false}})}Q.on("vbulletin:shrink",M).on("vbulletin:unshrink",P)})();(function(){var O=D(".js-top-menu-sitebuilder--list"),N=O.find(".b-top-menu__item"),R=N.find(".js-top-menu-link"),P=O.closest(".js-top-menu-sitebuilder");function U(){var V=vBulletin.Responsive.Debounce.checkElementShrinkRequirement(O);return V=="need_shrink"}function K(V){R.toggleClass("b-top-menu__item-link--compact",V)}function Q(V){P.toggleClass("b-top-menu__background--compact",V)}function S(V){vBulletin.CompMenuHorizontal.convertDropdownProgressive({$parent:O,$children:N,removeMenu:!V,})}var T=[K,Q,S,];function M(){D.each(T,function(V,W){W(true);if(!U()){return false}})}function L(){var V=T.length;while(--V>=0){T[V](false);if(U()){T[V](true);break}}}O.on("vbulletin:shrink",M).on("vbulletin:unshrink",L)})()})();D(".ui-tabs .ui-tabs-nav > li").addClass("ui-state-disabled");D(".announcement-tabs .ui-tabs-nav > li").removeClass("ui-state-disabled")})();window.vBulletin.runBeforeCallback=function(L,K){if(D.isArray(L)){L.unshift(K)}else{var J=L;L=function(){K.apply(this,arguments);if(typeof J=="function"){J.apply(this,arguments)}}}return L};window.vBulletin.pageHasSelectors=function(J){if(D.isArray(J)&&J.length>0&&D.trim(J.toString())!=""){var K=false;D.each(J,function(L,M){if(D(M).length>0){K=true;return false}});return K}return true};window.vBulletin.areJsonObjectsEqual=function(L,J){var K=function(O,N){for(var M in O){if(O.hasOwnProperty(M)&&N.hasOwnProperty(M)){var Q=O[M],P=N[M];if(Q!=P){if(Q instanceof Array&&P instanceof Array){if(D(Q).not(P).length>0||D(P).not(Q).length>0){return false}else{continue}}else{return false}}}else{return false}}return true};return(Object.keys(L).length==Object.keys(J).length)?K(L,J):false};window.vBulletin.ajaxSetup=(function(){var J=false;return{init:function(){if(J){return }J=true;D.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=UTF-8"})}}})();window.vBulletin.ajaxSetup.init();window.vBulletin.ajaxProfile=(function(){var L=[],M=false,K=true,J=false;return{init:function(){if(M){return }M=true;D(function(){if(D("#debug-information").length==0){K=false}D("<ol />").attr("id","debug-ajax-request-list").hide().css({height:"150px",overflow:"auto",padding:"4px",border:"1px solid #CCC",background:"#EEE","margin-top":"2px","margin-bottom":"4px"}).appendTo(D("#debug-information #debug-ajax-request-count").closest("li"));D("#debug-information #debug-ajax-request-count").css("cursor","pointer").on("click",function(){D("#debug-ajax-request-list").toggle()});J=true});function N(){if(J){D("#debug-information #debug-ajax-request-count").text(L.length);D.each(L,function(){if(!this.displayed){this.displayed=true;this.relUrl=this.url.indexOf(pageData.baseurl)==0?this.url.substring(pageData.baseurl.length):this.url;D("<li />").addClass("js-request-counter-"+this.requestCounter).text(this.relUrl).appendTo(D("#debug-ajax-request-list"))}var O=this.totalTimeTaken-this.networkTimeTaken;var P='{0} <span style="font-size:x-small;">({1}, <span title="Request Time: {2}ms, Processing Time: {3}ms, Total Time: {4}ms" style="text-decoration:underline;">{2}ms, {3}ms</span>){5}</span>'.format(this.relUrl,this.status,this.networkTimeTaken,O,this.totalTimeTaken,(this.errorThrown?" Error: "+this.errorThrown:""));D("#debug-ajax-request-list .js-request-counter-"+this.requestCounter).html(P)})}}D.ajaxPrefilter(function(O,R,P){if(!K){return }var Q=L.length;console.log("vBulletin AJAX profile: Before request #"+Q);L.push({displayed:false,url:O.url,relUrl:"",startTimeStamp:(new Date()).getTime(),endTimeStamp:0,finalTimeStamp:0,textStatus:"UNKNOWN",errorThrown:"",requestCounter:Q,networkTimeTaken:0,totalTimeTaken:0});O.success=vBulletin.runBeforeCallback(O.success,function(T,U,S){L[Q].endTimeStamp=(new Date()).getTime()});O.error=vBulletin.runBeforeCallback(O.error,function(S,U,T){L[Q].endTimeStamp=(new Date()).getTime();L[Q].errorThrown=T});O.complete=vBulletin.runBeforeCallback(O.complete,function(S,T){L[Q].finalTimeStamp=(new Date()).getTime();L[Q].status=T;L[Q].networkTimeTaken=L[Q].endTimeStamp-L[Q].startTimeStamp;L[Q].totalTimeTaken=L[Q].finalTimeStamp-L[Q].startTimeStamp;N()})})}}})();window.vBulletin.ajaxProfile.init();window.vBulletin.loadingIndicator=(function(){var O=0,N=false,M=false,K=0,J=0;function L(Q){if(Q){var S=D(".js-loading-indicator"),R=S.outerWidth(),P=vBulletin.isRtl(),T=P?"margin-right":"margin-left";if(R>0){S.css(T,-(R/2))}S.removeClass("h-hide");D("body").css("cursor","wait")}else{D(".js-loading-indicator").addClass("h-hide");D("body").css("cursor","auto")}}return{init:function(){if(N){return }D(document).ajaxStart(function(){window.vBulletin.loadingIndicator.show("ajaxStart")});D(document).ajaxStop(function(){window.vBulletin.loadingIndicator.hide("ajaxStop")});N=true},show:function(P){if(K>0&&P=="ajaxStart"){--K;++J;console.log("vBulletin.loadingIndicator.show ajax indicator suppressed");return }++O;console.log("vBulletin.loadingIndicator.show Counter: "+O+" Source: "+(P||"Unspecified"));if(O>0){M=window.setTimeout(function(){if(M){L(true);M=false}},1000)}},hide:function(P){if(J>0&&P=="ajaxStop"){--J;console.log("vBulletin.loadingIndicator.hide ajax indicator suppressed");return }--O;O=O<0?0:O;if(!P){O=0}console.log("vBulletin.loadingIndicator.hide Counter: "+O+" Source: "+(P||"Unspecified"));if(O<1){if(M){window.clearTimeout(M);M=false}L(false)}},suppressNextAjaxIndicator:function(){++K}}})();window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=D.merge(window.vBulletin.phrase.precache,["cancel","no","ok","yes","admin","admin_auth","april","attach_link","attach_video","august","cancel","cancel_edit","close","compare_versions","conversation","december","done","edit_conversation","email_addresses_must_match","error","error_loading_ckeditor_script","error_loading_editor","error_loading_post","error_posting_comment_code","error_saving_vote","error_x","existing_reply_will_be_deleted","february","flag_a_post","follow","follow_error","following","following_pending","following_remove","friday_min","go_to_first_new_post","hour","inlinemod_auth_password_empty","invalid_data","invalid_data_requested","invalid_email_address","invalid_request","invalid_server_response_please_try_again","invalid_special_channel_subscribe_request","invalid_user_permissions","invalid_username_specified","invalid_username_specified_maxlength_x","invalid_username_specified_minlength_x","invalid_query_definition_x","january","join","joined","join_error","july","june","leave","loading","logged_out_while_editing_post","login","login_success_admin_auth","march","may","minute","moderator","monday_min","new_posts","no","no_create_permissions","no_icon","no_leave_channel_permission","no_one_voted","no_permission","no_update_permissions","no_valid_tags_found","not_logged_no_permission","november","now","october","onbeforeunload_message_while_editing_post","people_who_liked","physically_remove_blog","physically_remove_comment","physically_remove_media","physically_remove_reply","physically_remove_topic","physically_remove_visitorMessage","please_enter_a_username","please_enter_a_valid_url_and_click_attach","please_enter_link_url","please_enter_video_url","please_enter_your_comment","please_enter_your_email_address","please_enter_your_reason_why_you_want_to_flag_this_post","please_provide_search_string","post_comment","post_history","posttype_blog","posttype_comment","posttype_media","posttype_reply","posttype_topic","posttype_visitorMessage","preview","saturday_min","search","see_less","see_more","select_option_and_click_delete_button_blog","select_option_and_click_delete_button_comment","select_option_and_click_delete_button_media","select_option_and_click_delete_button_reply","select_option_and_click_delete_button_topic","select_option_and_click_delete_button_visitorMessage","send_report","september","soft_delete_blog","soft_delete_comment","soft_delete_media","soft_delete_notes_blog","soft_delete_notes_comment","soft_delete_notes_media","soft_delete_notes_reply","soft_delete_notes_topic","soft_delete_notes_visitorMessage","soft_delete_reply","soft_delete_topic","soft_delete_visitorMessage","sunday_min","thanks_for_signing_up_log_in","the_report_has_been_sent","time","tuesday_min","thursday_min","unable_to_check_admin_permissions","unable_to_contact_server_please_try_again","unexpected_error","unfollow_error","unvote_cap","usernametaken","vote_a_post","vote_cap","wednesday_min","yes","you_have_a_pending_edit_unsaved"]);window.vBulletin.options=window.vBulletin.options||{};window.vBulletin.options.precache=window.vBulletin.options.precache||["bbtitle","crontab","bbtitle","markinglimit","threadpreview"];var B=vBulletin.createSiteDataTools(vBulletin.getAjaxBaseurl());B.phrase.init(pageData,pageData.languageid,vBulletin.storagetools.createTimed("phrase",pageData.phrasedate,pageData.current_server_datetime),vBulletin.phrase.precache);D.extend(vBulletin.phrase,B.phrase);B.options.init(vBulletin.storagetools.createTimed("options",pageData.optionsdate,pageData.current_server_datetime),vBulletin.options.precache);D.extend(vBulletin.options,B.options);vBulletin.ajaxtools=vBulletin.createAjaxTools(vBulletin.getAjaxBaseurl(),pageData.userid);vBulletin.ajaxlib=vBulletin.ajaxtools.library;vBulletin.AJAX=vBulletin.ajaxtools.ajax;vBulletin.ajaxForm=vBulletin.ajaxtools.ajaxForm;window.vBulletin.getScrollbarWidth=function(){if(D("body").data("scrollbar-width")){return D("body").data("scrollbar-width")}var J=D('<div style="width:50px;height:50px;overflow:auto;position:absolute;top:-99999px;"><div /></div>').appendTo("body"),L=J.children(),K=L.innerWidth()-L.height(99).innerWidth();J.remove();D("body").data("scrollbar-width",K);return K};window.vBulletin.assertUserHasAdminPermission=function(M,L,J,K){if(D(L).data("in-progress")){return false}D("body").css("cursor","wait");D(L).data("in-progress",true);vBulletin.AJAX({call:"/ajax/api/user/currentUserHasAdminPermission",data:{adminPermission:M},complete:function(){D("body").css("cursor","auto");D(L).data("in-progress",null)},success:function(N){if(N===true){J()}else{vBulletin.error("error","unable_to_check_admin_permissions");D("#config-dialog .loader").hide()}},api_error:(typeof K=="undefined"?undefined:function(N){if(vBulletin.ajaxtools.hasError(N,"inlinemodauth_required")){vBulletin.ajaxlib.inlineMod(K);return false}return true}),error_phrase:"unable_to_check_admin_permissions",})};vBulletin.selectTabByIndex=function(J){var K=this instanceof D?this:D(this);if(K.length&&J>-1&&K.hasClass("ui-tabs")){K.data("noPushState",true).tabs("option","active",J).data("noPushState",null).find(".ui-tabs-nav li").removeClass("ui-state-focus").eq(J).addClass("ui-state-focus").find("a").focus()}};D.ui.tabs.prototype._isLocal=function(){return true};(function(){var J=D.ui.tabs.prototype._processTabs;D.ui.tabs.prototype._processTabs=function(){var K=J.apply(this,arguments);this.panels.removeClass("h-hide");return K}})();vBulletin.tabify=function(K){var L=this instanceof D?this:D(this);if(L.length){var J={tabOptions:{},tabHistory:null,allowHistory:false,tabParamAsQueryString:true,hash:"",getTabIndexByHash:function(){return -1}};K=D.extend({},J,K);if(K.tabHistory instanceof vBulletin.history.instance&&K.tabHistory.isEnabled()){L.on("tabscreate",function(P,R){var M=vBulletin.parseQueryString(location.search,["_"]),S=Object.keys(M).length,O=vBulletin.getSelectedTabHashOrPath(L,K.tabParamAsQueryString),Q=K.tabHistory.getState();if(((K.tabParamAsQueryString&&S>1&&typeof M.tab!="undefined")||(!K.tabParamAsQueryString&&S>0))&&(!Q||D.isEmptyObject(Q.data))){var N={from:"tabs",tab:O};K.tabHistory.setDefaultState(N,document.title,location.href)}K.tabHistory.setStateChange(function(Y){var X=K.tabHistory.getState();if(X.data.from=="tabs"){K.tabHistory.log(X.data,X.title,X.url);var V=K.getTabIndexByHash(X.data.tab),T=vBulletin.parseQueryString(X.url,["tab","_"]);if(L.tabs("option","selected")!=V){vBulletin.selectTabByIndex.call(L,V);if(!D.isEmptyObject(T)){D(window).trigger("statechange.filter",["tabs",T])}}else{if(!D.isEmptyObject(T)){D(window).trigger("statechange.filter",["tabs",T])}else{var U,W,Z;if(X.data.tab){W=K.tabParamAsQueryString?D(X.data.tab):D('.ui-tabs .ui-tabs-panel[data-url-path="'+X.data.tab+'"]')}U=(W&&W.length&&W)||D(L.closest(".canvas-widget").data("widget-default-tab"));Z=D(".toolbar-filter-overlay .filter-options .js-default-checked",U);if(Z.length){Z.prop("checked",true).first().data("bypass-filter-display",true).trigger("change",[true]).data("bypass-filter-display",null);D(".filtered-by",U).addClass("h-hide").find(".filter-text-wrapper").empty()}else{D(".conversation-toolbar .js-default-checked",U).first().trigger("click",[true])}}}}},"tabs");if(typeof K.tabOptions.create=="function"){K.tabOptions.create.call(L[0],P,R)}})}if(K.allowHistory&&K.tabHistory instanceof vBulletin.history.instance){L.on("tabsbeforeactivate",function(R,S){var M=S.newPanel,P=S.newTab;if(typeof K.tabOptions.beforeActivate=="function"&&K.tabOptions.beforeActivate.call(this,R,S)===false){return false}var O,T=(K.tabParamAsQueryString?M.selector:D(P.context).data("url-path")),Q=undefined;if(!K.tabParamAsQueryString){Q=[];L.find(".ui-tabs-nav > li > a, .widget-tabs-panel").each(function(U,W){var V=D(this).data("url-path");if(D.inArray(V,Q)==-1){Q.push(V)}})}if(!K.tabHistory.isEnabled()){O=vBulletin.makeFilterUrlFromSelectedFilters(M,T.replace("#",""),K.tabParamAsQueryString,Q,K.hash);location.href=O;return false}if(!L.data("noPushState")){var N={from:"tabs",tab:T};O=vBulletin.makeFilterUrlFromSelectedFilters(M,T.replace("#",""),K.tabParamAsQueryString,Q);K.tabHistory.pushState(N,document.title,O)}else{L.data("noPushState",null)}})}L.tabs(K.tabOptions)}return L};vBulletin.getSelectedTabHashOrPath=function(K,L){var J;if(L){J=K.find(".ui-tabs-nav > .ui-tabs-active > a").prop("hash")}else{J=K.find(".ui-tabs-nav > .ui-tabs-active > a").data("url-path")}return J||""};vBulletin.parseUrl=function(K){var J=document.createElement("a"),L;J.href=K||"/";L=J.pathname;if(L.indexOf("/")!=0){L="/"+L}return{protocol:J.protocol,hostname:J.hostname,port:J.port,pathname:L,search:J.search,hash:J.hash}};vBulletin.makeHistoryUrl=function(O,J,M,K,N){var L=vBulletin.makePaginatedUrl(O,J);L=vBulletin.makeTabUrl(L,M.tab,M.tabParamAsQueryString);L=vBulletin.makeFilterUrl(L,K.filterName,K.filterValue,K.context,N);return L};vBulletin.makeTabUrl=function(K,M,Q,O,N){if(K){var P=vBulletin.parseUrl(K),R;if(Q){N=N||"tab";R=new RegExp("([?+|&+])"+N+"=\\w+[-\\w]*","i");if(P.search.match(R)){K=P.pathname+P.search.replace(R,"$1{0}={1}".format(N,M))}else{if(P.search){K="{0}{1}&{2}={3}".format(P.pathname,P.search,N,M)}else{K="{0}?{1}={2}".format(P.pathname,N,M)}}}else{var L=P.pathname.replace(/\/$/,""),J=L.split("/");R="\\/"+J[J.length-(L.match(/\/page([0-9]+)/)?2:1)]+"$";K=P.pathname.replace(new RegExp(R),"/"+M)+P.search}}else{K="/"}if(O){K+="#"+O}return K};vBulletin.makePaginatedUrl=function(L,K){if(L){var J=L.match(/\/page[0-9]+/);if(J){if(K>1){L=L.replace(J[0],"/page"+K)}else{L=L.replace(J[0],"")}}else{if(K>1){if(L.match(/\?/)){L=L.replace(/\?/,"/page"+K+"?")}else{if(L.match(/\#/)){L=L.replace(/\#.*/,"/page"+K)}else{L+="/page"+K}}}}}return L};vBulletin.makeFilterUrl=function(J,O,S,K,N,L){L=L||false;J=J||location.href;var T=D(".filtered-by",K),Q=vBulletin.parseUrl(J),U=Q.search;var P=D(".js-button-filter.js-default-checked.js-checked",K);if(P.data("filter-name")==O&&P.data("filter-value")==S){L=true}if(!L&&((T.data("clicked")&&D('.toolbar-filter-overlay input[name="{0}"][value="{1}"]'.format(O,S),K).hasClass("js-default-checked"))||(D('.toolbar-search-form input[name="{0}"]'.format(O),K).length&&!S))){L=true;T.data("clicked",null)}J=Q.pathname;if(U&&U.length>1){if(U.match(new RegExp(O+"=","i"))){var M=vBulletin.parseQueryString(U);if(!D.isEmptyObject(M)){var R="";D.each(M,function(V,W){if(!L||V!=O){R+="{0}={1}&".format(V,(V==O?S:W))}});if(R){J+="?"+R.substring(0,R.length-1)}}}else{if(!L){J+=U+"&{0}={1}".format(O,encodeURIComponent(S))}else{J+=U}}}else{if(!L){J+="?{0}={1}".format(O,encodeURIComponent(S))}}if(N){J+="#"+N}return J};vBulletin.getSelectedFilters=function(J,K){var L={};if(!K){var M=J.serializeArray();D.each(M,function(P,Q){if(Q.name!="securitytoken"){if(Q.name.slice(-2)=="[]"){var O=Q.name.split("[]");L[O[0]]=L[O[0]]||[];L[O[0]].push(Q.value)}else{L[Q.name]=Q.value}}})}else{var N=J.parent().find(".filtered-by .filter-text").filter(":visible");J.find(":input:radio:checked").each(function(P,R){var Q=D(R);if((Q.hasClass("js-default-checked")||Q.data("bypass-filter-display")==1)&&(N.length==0||N.filter('[data-filter-name={0}][data-filter-value="{1}"]').length==0)){return true}if(R.name.slice(-2)=="[]"){var O=R.name.split("[]");L[O[0]]=L[O[0]]||[];L[O[0]].push(R.value)}else{L[R.name]=R.value}})}return L};vBulletin.makeFilterUrlFromSelectedFilters=function(N,O,X,T,Q){var V,M=location.pathname.replace(/\/$/,"").replace(/\/page[0-9]+/,""),L=D(".toolbar-filter-overlay",N),S=vBulletin.getSelectedFilters(L,true),U=D(".pagenav-form .js-pagenum",N).val()||1,P=D(".toolbar-search-form .js-filter-search",N).val()||"",Z=D(N).closest(".canvas-widget"),W=D(".conversation-toolbar-wrapper",N).length?(D(".conversation-toolbar-wrapper",N).data("allow-history")=="1"):(D(N).data("allow-history")=="1"),K=new vBulletin.history.instance(W),J=Z.data("widget-default-tab")||Z.find(".ui-tabs-nav > li:first-child a").attr("href");if(D.isEmptyObject(S)){D(".conversation-toolbar .js-button-filters",N).each(function(){var a=D(".js-button-filter.js-checked:not(.js-default-checked)",this);if(a.length){S[a.data("filter-name")]=a.data("filter-name")}})}if(!X){var Y=new RegExp("\\/("+T.join("|")+")/?$"),R=M.match(Y);if(R){M=M.replace(new RegExp(R[0]),"/"+O)}else{M+="/"+O}}if(U>1&&K.isEnabled()){M+="/page"+U}if(X&&O&&J!=("#"+O)){S.tab=O;if(!K.isEnabled()){M+="?tab="+O}}if(!K.isEnabled()){return M+(Q?"#"+Q:"")}if(P){S.q=P}V=D.param(S);return M+(V?"?"+V:"")+(Q?"#"+Q:"")};vBulletin.parseQueryString=function(M,K){var J={},N;if(M&&M.length>1){N=M.indexOf("?");K=(K instanceof Array)?K:[];if(N!=-1){var L=M.substring(N+1).split("&");D.each(L,function(O,Q){var P=Q.split("=");if(K.length==0||(D.inArray(P[0],K)==-1)){J[P[0]]=decodeURIComponent((P[1]||"")).replace(/\+/g," ")}})}}return J};vBulletin.togglePageScrolling=function(L){var O=D(window),K=O.scrollTop(),N=O.scrollLeft(),J="scroll.vbtogglepagescrolling";function M(){O.scrollTop(K).scrollLeft(N)}O.off(J);if(!L){O.on(J,M)}};vBulletin.pagination=function(P){var X={context:document,onPageChanged:null,tabParamAsQueryString:true,allowHistory:false};if(P&&typeof P=="object"){D.extend(X,P)}var L,M=D(".pagenav-controls .pagenav-form",X.context),W=Number(D(".defaultpage",M).val())||Number(D(".js-pagenum",M).val())||1,R=new vBulletin.history.instance(X.allowHistory);M.data("object-instance",this);if(R.isEnabled()){var S=vBulletin.parseQueryString(location.search,["_"]),N=location.pathname.match(/\/page([0-9]+)/),K=R.getState();if(N&&Number(N[1])>1&&D.isEmptyObject(S)&&(!K||D.isEmptyObject(K.data))){L=vBulletin.makePaginatedUrl(location.href,W);var T={from:"pagination",page:W,tab:X.tabParamAsQueryString?"#"+M.closest(".ui-tabs-panel").attr("id"):vBulletin.getSelectedTabHashOrPath(M.closest(".ui-tabs"),false)};R.setDefaultState(T,document.title,L)}R.setStateChange(function(g){var Y=R.getState();if(Y.data.from=="pagination"){R.log(Y.data,Y.title,Y.url);if(location.search){var j=vBulletin.parseQueryString(location.search,["_"]);if(!D.isEmptyObject(j)||j.tab=="groups-tab"){delete j.tab;D(window).trigger("statechange.filter",["pagination",j]);return }}var c,a,k,h,f;if(Y.data.tab){c=X.tabParamAsQueryString?D(Y.data.tab):D('.ui-tabs .ui-tabs-panel[data-url-path="'+Y.data.tab+'"]')}a=(c&&c.length&&c)||X.context;k=D(".conversation-toolbar .filter-wrapper",a).data("object-instance");if(k){k.resetFilters(true)}if(Y.data.tab){h=c.closest(".ui-tabs");$tabAnchor=X.tabParamAsQueryString?h.find('.ui-tabs-nav > li > a[href*="{0}"]'.format(Y.data.tab)):h.find('.ui-tabs-nav > li > a[data-url-path="'+Y.data.tab+'"]');if(!$tabAnchor.parent().hasClass("ui-tabs-active")){var d=$tabAnchor.parent().index();vBulletin.selectTabByIndex.call(h,d);return }}var l=D(".pagenav-controls .pagenav-form",a);var b=l.data("object-instance");if(b&&typeof b.getOption=="function"&&typeof b.getOption("onPageChanged")=="function"){var Z=Y.data.page||W;b.getOption("onPageChanged").apply(l.get(0),[Z,false,!location.search,location.search])}}},"pagination")}function J(){return parseInt((D(".pagetotal",this).html()||"").replace(/[^\d]+/g,""),10)||1}function Q(Z,d){var c=J.apply(this),Y=D(".arrow[rel=next]",this),b=D(".arrow[rel=prev]",this);if(Z<1){Z=1}else{if(Z>c){Z=c}}D(".js-pagenum",this).val(Z);if(Z==c){Y.addClass("h-disabled").removeAttr("href")}else{Y.removeClass("h-disabled").attr("href",vBulletin.makePaginatedUrl(location.href,Z+1))}if(Z==1){b.addClass("h-disabled").removeAttr("href")}else{b.removeClass("h-disabled").attr("href",vBulletin.makePaginatedUrl(location.href,Z-1))}if(typeof X.onPageChanged=="function"){X.onPageChanged.apply(this,[Z,d])}if(c>1&&R.isEnabled()&&!d){var e=R.getState();if(!e||!e.data||!e.data.from||D.inArray(e.data.from,["filter_blogs","filter_groups"]==-1)){if(Z==1){L=D(".arrow[rel=next]",this).attr("href")}else{L=D(".arrow[rel=prev]",this).attr("href")}if(L){L=vBulletin.makePaginatedUrl(L,Z);var a={from:"pagination",page:Z,tab:X.tabParamAsQueryString?"#"+D(this).closest(".ui-tabs-panel").attr("id"):vBulletin.getSelectedTabHashOrPath(D(this).closest(".ui-tabs"),false)};R.pushState(a,document.title,L)}}}}function V(Y){var Z=parseInt(Y);if(Z&&typeof Z==="number"){D("input[name=result-id]",M).val(Z)}}function O(Y){D("a.see-all-btn",this).closest(".pagenav-controls")[Y?"addClass":"removeClass"]("h-hide")}D(".arrow",M).off("click").on("click",function(a){var Z=D(this),b=this.form||Z.closest("form").get(0);if(!Z.hasClass("h-disabled")){var Y=parseInt(D(".js-pagenum",b).val())+((Z.attr("rel")=="next")?1:-1);if(!R.isEnabled()&&X.allowHistory){if(!this.href||this.hash==this.href){this.href=vBulletin.makePaginatedUrl(location.href,Y)}return true}Q.apply(b,[Y,false])}return false});function U(){D(X.context).off("click",".js-pagenav .js-pagenav-button").on("click",".js-pagenav .js-pagenav-button",function(a){if(R.isEnabled()){var b=D(this),Y=b.data("page"),Z=D(".pagenav-form",X.context).get(0);Q.apply(Z,[Y,false]);return false}return true}).off("mouseover",".js-pagenav .js-pagenav-button").on("mouseover",".js-pagenav .js-pagenav-button",function(Z){var Y=D(this);if(!Y.prop("href")){Y.prop("href",vBulletin.makePaginatedUrl(location.href,parseInt(Y.data("page"),10)))}});D(".js-pagenav .js-pagenav-button",X.context).each(function(){this.href=vBulletin.makePaginatedUrl(location.href,parseInt(D(this).data("page")))});(function(){function Y(){var c=D(this);var e=c.data("vbshrink-hidden-elements");if(typeof e!="undefined"){e.removeClass("h-hide-imp")}var b=c.find("> .js-pagenav-button").filter(":visible"),Z=D(),a=D(),d=b.filter(".js-pagenav-current-button").data("page");b.each(function(o,h){var f=D(h),m=f.data("page"),g=f.is(".js-pagenav-prev-button, .js-pagenav-current-button, .js-pagenav-next-button"),n=f.is(".js-pagenav-first-button, .js-pagenav-last-button"),k=(m==(d-1)||m==(d+1)),j=(!n&&!k),l=(n?"1":(k?"2":"3"));if(!g){Z=Z.add(f);f.data("vbshrink-priority",l)}});D.each(["3","2","1"],function(f,g){Z.each(function(h,k){var j=D(k);if(j.data("vbshrink-priority")!=g){return true}var l=vBulletin.Responsive.Debounce.checkElementShrinkRequirement(c);if(l=="need_shrink"){j.addClass("h-hide-imp");a=a.add(j)}else{return false}})});c.data("vbshrink-hidden-elements",a)}D(document).on("vbulletin:shrink vbulletin:unshrink",".js-pagenav",Y);vBulletin.Responsive.Debounce.checkShrinkEvent(D(".js-pagenav"))})()}U();D(".js-pagenum",M).off("keypress").on("keypress",function(a){if(a.keyCode==13){a.preventDefault();var Y=parseInt(D(this).val(),10);var Z=J.apply(this.form);if(Y>Z){Y=Z}if(Y<1){Y=1}if(R.isEnabled()){Q.apply(this.form,[Y,false])}else{if(X.allowHistory){location.href=vBulletin.makePaginatedUrl(location.href,Y)}else{Q.apply(this.form,[Y,false])}}}});D(".js-pagenum",M).off("click").on("click",function(Y){D(this).select()});this.updatePageInfo=function(Z,Y){if(Z&&typeof Z=="object"){var a=Z.totalpages||1,b=D(".pagenav-controls .pagenav-form",X.context);D(".pagetotal",b).text(a);if(typeof Z.showseemore!="undefined"){if(Z.showseemore){O.apply(b,[false])}else{O.apply(b,[true])}}Z.perpage=vBulletin.conversation.POSTS_PER_PAGE;if(Y&&D(".pagenav-container",X.context).length>0){D.post(pageData.baseurl+"/ajax/render/pagenav",{pagenav:Z},function(c){if(c){D(".pagenav-container",X.context).replaceWith(c.template);U()}},"json")}Q.apply(b.get(0),[Z.pagenumber,Y])}};this.updateResultId=function(Y){V(Y)};this.setOption=function(Y,Z){X[Y]=Z};this.getOption=function(Y){return X[Y]};this.updatePageNavigation=function(Z,Y,a){Q.apply(Z.get(0),[Y,a])}};vBulletin.conversation=vBulletin.conversation||{};vBulletin.conversation.toggleCommentBox=function(){var J=D(this).closest(".js-comment-entry__parent").find(".js-comment-entry");J.slideToggle("fast",function(){var K=D(this).find(".js-comment-entry__textbox");if(K.is(":visible")){K.focus()}});J.find(".js-comment-entry__cancel").off("click").on("click",function(K){J.slideToggle();return false});return false};vBulletin.conversation.postComment=function(M,K){var S=this,P=D(S),O=P.closest(".js-comment-entry"),L=O.find(".js-comment-entry__textbox"),Q=D.trim(L.val());if(!Q){vBulletin.warning("post_comment","please_enter_your_comment",function(){L.focus()});return false}D("body").css("cursor","wait");P.blur();var N=P.closest(".js-comment-entry__parent"),R=P.closest(".js-comment-entry--blog").length==1?1:0,J=P.closest(".js-comment-entry--article").length==1?1:0;vBulletin.AJAX({call:"/ajax/post-comment",data:({text:Q,parentid:N.attr("data-node-id"),postindex:N.find(".js-post__content .b-post__count").text().replace("#",""),view:N.parent().hasClass("stream-view")?"stream":"thread",redirecturl:L.hasClass(".reload-on-post")?1:0,isblogcomment:R,isarticlecomment:J,humanverify:{input:O.find('[name="humanverify[input]"]').val(),hash:O.find('[name="humanverify[hash]"]').val()},}),complete:function(){console.log("post-comment complete.");D("body").css("cursor","auto");vBulletin.hv.reset()},success:function(T,V,W){if(typeof K=="function"){K.apply(S,[T])}if(!R&&!J){O.slideToggle()}vBulletin.subscribe.updateSubscribeButton(T.topic_subscribed);var U=N.attr("data-node-id");if(pageData.threadmarking=="0"||pageData.userid=="0"){vBulletin.cookie.setBbarrayCookie("discussion_view",U,Math.round(new Date().getTime()/1000))}else{vBulletin.markRead(U)}},api_error:vBulletin.hv.resetOnError,title_phrase:"conversation",error_phrase:"error_posting_comment_code",})};vBulletin.conversation.showIp=function(K){var M=D(this),L=D(this).data("post-ip"),J=D(this).data("post-host");openAlertDialog({title:vBulletin.phrase.get("ip_info"),message:vBulletin.phrase.get("ip_address_is")+": "+L+"<br />"+vBulletin.phrase.get("host_name_is")+': <span class="ip-host-name loading">...</span>',iconType:"none"});vBulletin.AJAX({call:"/ajax/api/node/getHostName",data:{ip:L},success:function(N,O,P){D(".ip-host-name").removeClass("loading").html(N)}});return false};vBulletin.conversation.showPostHistory=function(M){var N=D(this);var L=D(this).closest(".js-post").attr("data-node-id");var K=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("cancel")},onAfterClose:function(){if(this.id=="btnConfirmDialogYes"){var P=K.find(".post-history-form");var O={oldpost:P.find("input:radio[name=old]:checked").val()||1,newpost:P.find("input:radio[name=new]:checked").val()||1,nodeid:L};D("#btnConfirmDialogYes").hide();var Q=openConfirmDialog({title:vBulletin.phrase.get("post_history"),message:vBulletin.phrase.get("loading")+"...",width:800,dialogClass:"post-history-comparison-dialog dialog-container dialog-box loading",buttonLabel:{yesLabel:vBulletin.phrase.get("compare_versions"),noLabel:vBulletin.phrase.get("close")},onAfterClose:function(){D("#btnConfirmDialogYes").show()}});J(Q,"post_history_form",O)}}});J(K,"post_history_form",{nodeid:L});function J(O,P,Q){Q.isAjaxTemplateRenderWithData=true;vBulletin.AJAX({call:"/ajax/render/"+P,data:Q,success:function(R){O.removeClass("loading").find(".dialog-content .message").html(R.template).end().dialog("option","position",{of:window})},after_error:function(){O.dialog("close")}})}};vBulletin.conversation.flagPost=function(K){var L=D(this),J=D(this).closest(".js-post").attr("data-node-id");vBulletin.openPromptDialog({title:vBulletin.phrase.get("flag_a_post"),message:vBulletin.phrase.get("please_enter_your_reason_why_you_want_to_flag_this_post"),buttonLabel:{okLabel:vBulletin.phrase.get("send_report"),cancelLabel:vBulletin.phrase.get("cancel")},multiline:true,validation:{callback:vBulletin.openPromptDialog.validationString,showError:true},onClickOK:function(M){D("body").css("cursor","wait");vBulletin.AJAX({call:"/report/report",data:{reason:M,reportnodeid:J},success:function(N){D("#prompt-dialog").dialog("close");vBulletin.alert("flag_a_post","the_report_has_been_sent")},complete:function(){D("body").css("cursor","default")},error_phrase:"unable_to_contact_server_please_try_again",title_phrase:"flag_a_post"});return false}});return false};vBulletin.conversation.editPost=function(P,S){var U=D(this),L,T,Q=U.closest(".conversation-list");if(U.closest(".js-comments").length>0){L="comment"}var M=D(".edit-conversation-container form",Q);if(M.length>0){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:vBulletin.phrase.get("you_have_a_pending_edit_unsaved"),iconType:"warning",onAfterClose:function(){vBulletin.animateScrollTop(M.closest(".js-post").offset().top,{duration:"slow"})}});return }if(S&&S.isFilterSelected("conversations_on")){S.toggleNewConversations(false)}window.vBulletin.loadingIndicator.show();P.preventDefault();var K=U.parent().attr("data-node-id"),J=(L=="comment")?U.closest(".js-comment"):U.closest(".js-post__content-wrapper");if(Q.hasClass("thread-view")){T="thread"}else{if(Q.hasClass("full-activity-view")){T="full-activity-stream"}else{if(Q.hasClass("activity-view")){T="activity-stream"}else{T="stream"}}}L=L||J.attr("data-node-type")||"";var O,R=D(".b-post__count",J).text()||"1";if(L=="comment"&&(T=="thread"||Q.closest(".blog-conversation-content-widget").length==1)){O=Number(R.replace("#",""))}else{O=Number(R.replace("#",""))-1}var N=function(W,Z,a,V){var b=D(".edit-conversation-container form",J).data("content-type");var X=vBulletin.triggerHandler.apply(V.get(0),["afterSave",D(document),W]);if(X===false){D("body").trigger(b+"_editform_onunload",[J]);window.vBulletin.loadingIndicator.hide();return }var Y=pageData;Y["posts-perpage"]=vBulletin.conversation.POSTS_PER_PAGE;if(T=="thread"){Y["comments-perpage"]=vBulletin.conversation.COMMENTS_PER_PAGE}if(W&&vBulletin.ajaxtools.hasError(W.warnings,"warning_spam_post")){vBulletin.ajaxtools.showApiError(W.warnings,W,{title_phrase:"warning",after_error:function(){if(W.warningReturnUrl){location.href=W.warningReturnUrl}else{window.location.reload(true)}}});return }var a=D.post(vBulletin.getAjaxBaseurl()+"/create-content/loadnode",{nodeid:K,view:T,index:O,page:Y,type:L,isAjaxTemplateRender:true,isAjaxTemplateRenderWithData:true},function(h){if(h.error){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get(h.error),iconType:"error"})}else{var c=V.closest(".js-content-entry").data("current-channelid"),e=V.find('input[name="parentid"]:checked').val(),d=D(h.template);if(c>0&&e>0&&(c!=e)){window.location.reload(true);return }D("body").trigger(b+"_editform_onunload",[J]);if(S&&S.isFilterSelected("conversations_on")){S.toggleNewConversations(true)}U.closest(".js-post").replaceWith(d);if(h.hasOwnProperty("template_article_title_info")){var f=D(".js-update-article-title-info"),k=D(h.template_article_title_info);if(f.length>0){f.empty().append(k)}}D("body").trigger(b+"_newcontent_onload",[d]);var j=d.attr("data-node-id");if(d.hasClass("js-conversation-starter")){var g=D(".js-post-title",d).first().text();document.title=g+" - "+vBulletin.options.get("bbtitle");D(".page-title-widget .js-main-title").text(g)}D(".js-select-box",d).selectBox();vBulletin.animateScrollTop(d.offset().top,{duration:"slow"})}},"json").error(function(){openAlertDialog({title:vBulletin.phrase.get("conversation"),message:vBulletin.phrase.get("error_loading_post"),iconType:"error"})}).complete(function(){window.vBulletin.loadingIndicator.hide()})};D.post(vBulletin.getAjaxBaseurl()+"/create-content/loadeditor",{nodeid:K,type:L,view:T,isAjaxTemplateRender:true},function(V,Y){if(Y){vBulletin.error("edit_conversation",Y[0])}else{var W=function(){if(typeof vBulletin.upload=="undefined"||typeof vBulletin.tagEditor=="undefined"||typeof vBulletin.contentEntryBox.init=="undefined"){vBulletin.ckeditor.loadScripts("",{},W);return }J.addClass("b-post--edit");J.find(".js-post__content").first().addClass("b-post__content--edit");J.find(".b-post__footer").first().addClass("b-post__footer--edit");$container=J.find(".edit-conversation-container").first();J.closest(".js-album-detail").find(".conversation-body, .profile-media-uploadphotos, .js-photo-preview").addClass("h-hide-imp");vBulletin.contentEntryBox.init();vBulletin.hv.init($container.find(".js-human-verification"));vBulletin.contentEntryBox.setDefaultTab($container.find(".js-content-entry").first());$container.show();console.log($container);window.vBulletin.loadingIndicator.hide();var a=$container.find(".js-attach-list");vBulletin.upload.initializePhotoUpload(J);var Z=D(".js-post[data-node-id={0}] .tag-editor-container .tag-input".format(K));if(Z.length>0&&typeof vBulletin.tagEditor!="undefined"){var b=new vBulletin.tagEditor.instance(Z.selector)}if(a.data("attach-count")>0){var c=$container.find(".b-toolbar__item").filter(function(){return D(this).data("panel")=="b-content-entry-panel__content--attachment"});if(!c.hasClass("b-toolbar__item--active")){c.trigger("click")}}vBulletin.contentEntryBox.afterPanelChange(J);vBulletin.flatpickr.initPickers()};console.log("Edit mode: Adding Content Entry UI to DOM (contains parsed post text in the .js-editor-parsed-text element)");D(".edit-conversation-container",J).first().hide().html(V);var X=D(".edit-conversation-container form",J).data("content-type");D(window).off("beforeunload.editPost").on("beforeunload.editPost",function(){return vBulletin.phrase.get("onbeforeunload_message_while_editing_post")});D("body").trigger(X+"_editform_onload",[J,W]);vBulletin.ajaxForm.apply(D("form.js-contententry-form",J),[{dataType:"json",success:N,beforeSerialize:function(Z){console.log("ajaxForm beforeSerialize (vBulletin.conversation.editPost)");Z.trigger("beforeSave");var a=D("body").triggerHandler(X+"_editform_onbeforeserialize",[Z]);return(a===false)?false:true},beforeSubmit:function(c,b,a){var Z=vBulletin.contentEntryBox.validateForm.apply(b,[a]);if(Z===false){return false}D(window).off("beforeunload.editPost");window.vBulletin.loadingIndicator.show();return true},complete:function(){window.vBulletin.loadingIndicator.hide();console.log("ajaxForm complete (vBulletin.conversation.editPost)")}}])}},"json").error(function(W,X,V){openAlertDialog({title:vBulletin.phrase.get("edit_conversation"),message:"HTTP {0} - {1}".format(W.status,V),iconType:"error"})}).complete(function(W,X,V){window.vBulletin.loadingIndicator.hide()})};vBulletin.conversation.votePost=function(N){var M=D(this).closest(".js-post").attr("data-node-id"),L,K,J;D("body").css("cursor","wait");if(!D(this).hasClass("voted")){L="vote";K="unvote_cap";J=true}else{L="unvote";K="vote_cap";J=false}vBulletin.AJAX({call:"/ajax/api/reputation/"+L,data:{nodeid:M},success:function(P){var O=D(".js-post[data-node-id="+M+"]");O.find(".votecount").html(P.votes);O.find(".js-post-control__vote").toggleClass("voted",J).find(".b-post-control__label").text(vBulletin.phrase.get(K))},complete:function(){D("body").css("cursor","default")},title_phrase:"error_saving_vote"})};vBulletin.conversation.showWhoVoted=function(L){var J=D(this);if(D(this).hasClass("novotepopup")){return }var K=J.closest(".js-post").attr("data-node-id");J.qtip({content:{title:{text:vBulletin.phrase.get("people_who_liked"),button:true},text:vBulletin.phrase.get("loading")+"...",ajax:{url:vBulletin.getAjaxBaseurl()+"/ajax/api/reputation/fetchWhovoted",type:"POST",data:{nodeid:K},dataType:"json",once:false,success:function(P,N){if(P.errors){this.set("content.text",P.errors[0][0])}else{if(P.length<1){this.set("content.text",vBulletin.phrase.get("no_one_voted"))}else{var R="<ul>";for(x in P){var M=pageData.baseurl+P[x].profileurl,U;if(!P[x].avatarurl){U=pageData.baseurl_core+"/image.php?u="+P[x].userid+"&type=profile"}else{U=pageData.baseurl_core+"/"+P[x].avatarurl}var Q=D("<img>").attr("src",U).attr("alt",P[x].username),T=D("<a>").attr("href",M).addClass("avatar"),O=D("<a>").attr("href",M).addClass("username").html(P[x].musername),V=D("<li>"),S=D("<div>").addClass("usertitle").html(P[x].usertitle);T.append(Q);V.append(T);V.append(O);V.append(S);R+=D("<div>").append(V).html()}R+="</ul>";this.set("content.text",R)}}},error:function(M,O,N){this.set("content.text","failed to load.")}}},position:{my:"left top",at:"right top",viewport:D(window)},show:{event:"click"},hide:{event:"unfocus",fixed:true},style:{classes:"ui-tooltip-shadow ui-tooltip-light ui-tooltip-whovoted"}});J.qtip("api").show()};vBulletin.conversation.processPostContent=function(J){J.css("border-bottom","").filter(".stream-view.activity-view").find(".list-item-poll form.poll").each(function(K,L){if(D(this).is(":visible")&&D(".view-less-ctrl",this).hasClass("h-hide")){vBulletin.conversation.limitVisiblePollOptionsInAPost(this,3)}})};vBulletin.conversation.limitVisiblePollOptionsInAPost=function(N,M){if(typeof M=="undefined"){M=3}var K=0,L=D("ul.poll li",N),J=parseInt(L.css("line-height"),10);L.each(function(O){D(this).removeClass("h-hide");var P=D(this).height();K+=P/J;if(K>M){D(this).addClass("h-hide")}else{D(this).css("display","")}});if(K>3){D(".view-more-ctrl",N).removeClass("h-hide").next(".js-button-group").addClass("h-hide").next(".view-less-ctrl").addClass("h-hide")}else{D(".view-more-ctrl",N).addClass("h-hide").next(".js-button-group").removeClass("h-hide").next(".view-less-ctrl").addClass("h-hide")}};vBulletin.conversation.bindEditFormEventHandlers=function(N){N=(N)?N.toLowerCase():"";if(D.inArray(N,["text","gallery","video","poll","link","comment","event"])!=-1||N=="all"){var L=function(Q,P){if(typeof P=="function"){console.log("Edit mode: initializeEditor");var O=Q.find(".js-editor");if(O.length>0){vBulletin.ckeditor.initEditor(O,{success:function(R){if(typeof P=="function"){P();vBulletin.contentEntryBox.afterPanelChange(Q);vBulletin.ckeditor.initEditorComponents(Q);var S=this;window.setTimeout(function(){console.log("Edit mode: Adding post data to CKEditor (vBulletin.conversation.bindEditFormEventHandlers)");S.setData(O.prev(".js-editor-parsed-text").html(),function(){var T=vBulletin.ckeditor.getEditor(R);vBulletin.ckeditor.fixTableFunctionality.call(vBulletin.ckeditor,{},T);setTimeout(function(){vBulletin.ckeditor.modifyImagePaths(D(T.container.$))},0);T.focus()})},0)}},error:function(S){if(typeof P=="function"){P()}O.prop("disabled",false).removeClass("ckeditor-load-on-focus").closest(".js-content-entry").addClass("b-content-entry--no-ckeditor");var R=O.prev(".js-editor-parsed-text").html();if(R!=""){vBulletin.AJAX({call:"/ajax/api/editor/convertHtmlToBbcode",data:{nodeid:pageData.nodeid,data:R,allowsmilie:1,securitytoken:pageData.securitytoken},success:function(T){O.html(T.data)},error_phrase:"error_converting_message"})}},hideLoadingDialog:false})}else{if(typeof P=="function"){P();O.focus()}}}};var M=function(Q){var P=Q.find(".js-editor");if(P.length>0){var O=P.attr("id");if(vBulletin.ckeditor.editorExists(O)){vBulletin.ckeditor.destroyEditor(O)}}P.closest("form").remove()};var K={};K.comment=function(){D("body").off("comment_editform_onload").on("comment_editform_onload",function(P,Q,O){if(typeof O=="function"){O();D(".js-editor",Q).focus().filter(".autogrow").elastic().off("blur.elastic")}}).off("comment_editform_onunload").on("comment_editform_onunload",function(O,P){})};K.text=function(){D("body").off("text_editform_onload").on("text_editform_onload",function(P,Q,O){L(Q,O)}).off("text_editform_onunload").on("text_editform_onunload",function(O,P){M(P)}).off("text_newcontent_onload").on("text_newcontent_onload",function(O,P){if(P.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(P)}})};K.event=function(){D("body").off("event_editform_onload").on("event_editform_onload",function(P,Q,O){L(Q,O)}).off("event_editform_onunload").on("event_editform_onunload",function(O,P){M(P)}).off("event_newcontent_onload").on("event_newcontent_onload",function(O,P){if(P.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(P)}})};K.poll=function(){var O=function(P){P.find(".js-remove-button").prop("disabled",(P.find("li").length<=2))};D("body").off("poll_editform_onload").on("poll_editform_onload",function(Q,R,P){L(R,P);O(D(this).find(".b-poll-fieldset__poll-answers"))}).off("poll_editform_onunload").on("poll_editform_onunload",function(P,Q){M(Q)}).off("poll_newcontent_onload").on("poll_newcontent_onload",function(P,Q){O(D(this).find(".b-poll-fieldset__poll-answers"));if(Q.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(Q);vBulletin.conversation.limitVisiblePollOptionsInAPost(D("form.poll",Q),3)}})};K.gallery=function(){D("body").off("gallery_editform_onload").on("gallery_editform_onload",function(P,Q,O){D('.b-toolbar__item[data-panel="b-content-entry-panel__content--gallery"]',Q).trigger("click");L(Q,function(){if(typeof O=="function"){O()}vBulletin.upload.initializePhotoUpload(Q)})}).off("gallery_editform_onunload").on("gallery_editform_onunload",function(O,P){M(P)}).off("gallery_newcontent_onload").on("gallery_newcontent_onload",function(O,P){if(P.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(P)}})};K.video=function(){D("body").off("video_editform_onload").on("video_editform_onload",function(P,Q,O){D('.b-toolbar__item[data-panel="b-content-entry-panel__content--video"]',Q).trigger("click");L(Q,function(){if(typeof O=="function"){O()}J(D(".b-content-entry-panel__content--video",Q),"video")});D(".js-attach-button",Q).off("click").on("click",function(U){U.preventDefault();var R=D(this),V=R.closest(".b-content-entry-panel__content--video"),T=D(".b-link-input__url",V),S=D.trim(T.val());if(!S){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get("please_enter_video_url"),iconType:"warning",onAfterClose:function(){T.focus()}});return false}R.prop("disabled",true);D(".js-contententry-buttons .b-button",V).prop("disabled",true);D("body").css("cursor","wait");D.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:S,isAjaxTemplateRender:true},function(X){if(X.error){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:vBulletin.phrase.get(X.error),iconType:"warning",onAfterClose:function(){T.focus()}})}else{$template=D(X);V.find(".js-panel-content").append($template);J(V,"video");$template.fadeIn("slow",function(){T.val("");D(".b-link-input",V).addClass("h-hide")});var W=Q.closest("form");if($template.find("js-video-url")){W.data("content-type","video")}else{W.data("content-type","link")}}},"json").error(function(Y,X,W){openAlertDialog({title:vBulletin.phrase.get("attach_video"),message:"HTTP {0} - {1}".format(Y.status,W),iconType:"error"})}).complete(function(){D("body").css("cursor","default");R.prop("disabled",false);D(".js-contententry-buttons .b-button",V).prop("disabled",false)})})}).off("video_editform_onunload").on("video_editform_onunload",function(O,P){M(P)}).off("video_newcontent_onload").on("video_newcontent_onload",function(O,P){if(P.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(P)}})};K.link=function(){D("body").off("link_editform_onload").on("link_editform_onload",function(P,Q,O){D('.b-toolbar__item[data-panel="b-content-entry-panel__content--link"]',Q).trigger("click");L(Q,function(){if(typeof O=="function"){O()}J(D(".b-content-entry-panel__content--link",Q),"link")});D(".js-attach-button",Q).off("click").on("click",function(U){U.preventDefault();var R=D(this),V=R.closest(".b-content-entry-panel__content--link"),T=D(".b-link-input__url",V),S=D.trim(T.val());if(!S){openAlertDialog({title:vBulletin.phrase.get("error"),message:vBulletin.phrase.get("please_enter_a_valid_url_and_click_attach"),iconType:"warning",onAfterClose:function(){T.focus()}});return false}if(!S.match(/^https?:\/\//)){S="http://"+S;T.val(S)}R.prop("disabled",true);D(".js-contententry-buttons .b-button",V).prop("disabled",true);D("body").css("cursor","wait");D.post(vBulletin.getAjaxBaseurl()+"/link/getlinkdata",{url:S,isAjaxTemplateRender:true},function(Y){if(Y.error){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:vBulletin.phrase.get(Y.error),iconType:"warning",onAfterClose:function(){T.focus()}})}else{var X=D(Y);X.find("img").error(function(){D(this).closest("li").remove()});V.find(".js-panel-content").append(X);J(V,"link");X.fadeIn("slow",function(){T.val("");D(".b-link-input",V).addClass("h-hide")});var W=Q.closest("form");if(X.find("js-video-url")){W.data("content-type","video")}else{W.data("content-type","link")}}},"json").error(function(Y,X,W){openAlertDialog({title:vBulletin.phrase.get("attach_link"),message:"HTTP {0} - {1}".format(Y.status,W),iconType:"error"})}).complete(function(){D("body").css("cursor","default");R.prop("disabled",false);D(".js-contententry-buttons .b-button",V).prop("disabled",false)})})}).off("link_editform_onunload").on("link_editform_onunload",function(O,P){M(P)}).off("link_newcontent_onload").on("link_newcontent_onload",function(O,P){if(P.closest(".conversation-list.stream-view.activity-view").length>0){vBulletin.truncatePostContent(P)}}).off("link_savepost_success").on("link_savepost_success",function(O,P){D(".b-link-input",P).removeClass("h-hide-imp")})};var J=function(P,Q){D(".b-link-content__urlinfo .js-link-edit",P).on("click",function(S){S.preventDefault();var R=D(this).parent().parent();R.addClass("b-link-content__urlinfo-meta--edit-mode");D(".js-link-textbox",R).val(D.trim(D(".b-link-content__urlinfo-text",R).text())).trigger("focus");D(".js-link-save",R).on("click",function(T){T.preventDefault();D(".b-link-content__urlinfo-text",R).text(D(".js-link-textbox",R).val());R.removeClass("b-link-content__urlinfo-meta--edit-mode")})});D(".js-link-remove",P).on("click",function(R){R.preventDefault();D(this).closest(".b-content-entry-panel__content").find(".b-link-input").removeClass("h-hide");D(this).closest(".js-panel-content").empty();D(".b-link-input",P).removeClass("h-hide")});if(Q=="link"){D(".js-link-preview-checkbox",P).off("click").on("click",function(){D(".b-link-content__thumbnail",P)[this.checked?"addClass":"removeClass"]("h-hide")});var O=D(".b-link-thumbnail-list__item",P).length;D(".b-link-thumbnail-list",P).jcarousel({scroll:1,wrap:null,size:O,rtl:vBulletin.isRtl(),buttonNextCallback:function(T,S,R){D(".b-thumbnail-nav .b-thumbnail-nav__next-arrow",P).toggleClass("b-icon--disabled",!R)},buttonPrevCallback:function(T,S,R){D(".b-thumbnail-nav .b-thumbnail-nav__prev-arrow",P).toggleClass("b-icon--disabled",!R)},initCallback:function(S,R){if(R=="init"&&O>0){D(".b-thumbnail-nav .b-thumbnail-nav__counter",P).html("1/"+O);D(".b-thumbnail-nav .b-thumbnail-nav__prev-arrow",P).off("click").on("click",function(){if(!D(this).hasClass("b-icon--disabled")){D(".jcarousel-container .jcarousel-prev",P).trigger("click")}});D(".b-thumbnail-nav .b-thumbnail-nav__next-arrow",P).off("click").on("click",function(){if(!D(this).hasClass("b-icon--disabled")){D(".jcarousel-container .jcarousel-next",P).trigger("click")}})}},itemVisibleInCallback:function(U,S,R,T){if(T=="init"){return false}D(".b-thumbnail-nav .b-thumbnail-nav__counter",P).html(R+"/"+O);D('input[type="radio"]',S).prop("checked",true)},itemFallbackDimension:90})}};if(N!="all"){K[N].call()}else{D.each(K,function(O,P){P.call()})}}};vBulletin.isScrolledIntoView=function(L,Q){var R=false;if(D.isPlainObject(Q)&&(Q).toString()=="[object Object]"){R=true;Q.top=0;Q.bottom=0}L=(L instanceof D)?L:D(L);if(L.length==0){return false}var J=D(window).scrollTop(),K=J+D(window).height(),O=L.offset().top,M=O+L.outerHeight(),P=O-J,N=K-M;if(R){Q.top=P;Q.bottom=N}return(P>=0&&N>=0)};vBulletin.scrollToFixed=function(N){var J=this,K={element:D(),fixedAt:"top",limit:0,triggerOnload:true,zIndex:99},L=("scrollToFixed"+Math.random()).replace(".","");function M(T){K=D.extend({},K,T);if(K.element){K.element=(K.element instanceof D)?K.element:D(K.element);if(K.element.length>0){if(D.inArray(K.fixedAt,["top","bottom"])){K.fixedAt="top"}var Q=K.element,O="scrolltofixed",P={width:Q.width(),offset:Q.offset(),"margin-top":parseInt(Q.css("margin-top"),10),"margin-bottom":parseInt(Q.css("margin-bottom"),10),cssPosition:Q.css("position"),coordinates:{left:Q.css("left"),top:Q.css("top"),right:Q.css("right"),bottom:Q.css("bottom")}};var S=D("<div />").addClass("scrolltofixed-filler").hide().insertAfter(Q);Q.data("origOffsetTop",P.offset.top);Q.css("z-index",K.zIndex);Q.data("object-instance",J);var R=D(window).off("scroll."+L).on("scroll."+L,function(){if(Q.is(":hidden")){return }var X=D(this).scrollTop();if(K.limit>0&&X>K.limit&&Q.hasClass(O)){Q.removeClass(O).css({position:"absolute",left:"auto",right:"auto",top:"auto",bottom:"auto",width:P.width})}else{if((K.limit>0&&X<K.limit&&X>P.offset.top&&!Q.hasClass(O))||(K.limit<=0&&X>P.offset.top&&!Q.hasClass(O))){S.css({display:Q.css("display"),width:Q.outerWidth(true),height:Q.outerHeight(true),"float":Q.css("float")});var U=(vBulletin.Responsive&&vBulletin.Responsive.scrollToFixedBreakPoint)?vBulletin.Responsive.scrollToFixedBreakPoint:0;if(D("#vb-page-body").width()>U){Q.addClass(O).width(P.width).css({left:P.offset.left,right:"auto",width:P.width,top:(K.fixedAt=="top")?0:"auto",bottom:(K.fixedAt=="bottom")?0:"auto",position:""})}else{S.hide()}var W=P["margin-"+K.fixedAt];if(W){var V={};V[K.fixedAt]=-W+"px";Q.animate(V,"fast")}}else{if(X<=P.offset.top&&Q.hasClass(O)){S.hide();Q.removeClass(O).css({position:"",width:"",left:"",top:"",right:"",bottom:""})}}}}).off("resize."+L).on("resize."+L,function(){Q.removeClass(O).width("auto").css({position:"",left:""});P.width=Q.width();P.offset=Q.offset();D(this).trigger("scroll."+L)});if(K.triggerOnload){R.trigger("scroll."+L)}}}}this.updateLimit=function(O){if(!isNaN(Number(O))){K.limit=O;D(window).trigger("scroll."+L)}};this.addLimit=function(O){if(!isNaN(Number(O))){K.limit+=O;D(window).trigger("scroll."+L)}};this.reset=function(O){M(O)};M(N)};vBulletin.scrollToAnchor=function(M){M=M.replace(/(:|\.|\[|\]|,|\/)/g,"\\$1");var Q=D(M);console.log("vBulletin.scrollToAnchor() hash: {0}, found: {1}".format(M,Q.length));if(Q.length>0){var K=Q.show().offset().top-2;Q.hide();var O=D("html,body"),P=D(".scrolltofixed-floating.scrolltofixed-top"),J=false;if(P.length>0){if(D(".list-container .list-item:first > a.anchor"+M).length==1){if(P.hasClass("scrolltofixed")){P.removeClass("scrolltofixed")}K=P.offset().top;J=true}else{if(P.hasClass("scrolltofixed")){K-=P.outerHeight()}}}function N(T){var S=T.show().offset().top;T.hide();S-=(P.hasClass("scrolltofixed")?P.outerHeight():0);return Math.round(S)}function R(){O.stop(true)}var L="scroll mousedown wheel DOMMouseScroll mousewheel keyup";O.off(L,R).one(L,R);O.animate({scrollTop:K},{duration:1000,step:function(S,T){if(!J){T.end=N(Q)}},always:function(){D("a.anchor").show();Q.show();O.off(L,R)}});return false}D("a.anchor").show();return true};if(location.hash){vBulletin.scrollToAnchor(location.hash)}vBulletin.animateScrollTop=function(K,L){console.log("vBulletin.animateScrollTop({0})".format(K));var J=D(".scrolltofixed-floating.scrolltofixed-top");if(J.length>0){var M=J.data("origOffsetTop")||J.offset().top;if(!J.hasClass("scrolltofixed")&&M<K){K-=J.outerHeight(true)}if(M<K){K-=J.outerHeight()}}D("html, body").animate({scrollTop:K},L)};vBulletin.truncatePostContent=function(J){J=(J instanceof D)?J:D(J);if(J.selector==""){J=D("body")}D(".poll-desc.ellipsis, .message-body.ellipsis",J).each(function(){var K=D(this);truncatedHeight=K.height();K.removeClass("ellipsis");var L=K.height();K.addClass("ellipsis");if(L>truncatedHeight){K.closest(".list-item-body").find(".post-links").removeClass("hide-see-link").find(".see-link").off("click").on("click",function(){var N=D(this);if(N.hasClass("more")){K.removeClass("ellipsis")}else{K.addClass("ellipsis")}N.toggleClass("more less");var M=N.text();N.text(N.data("toggle-text")).data("toggle-text",M);return false})}});D(".list-item .see-link.more",J).each(function(K){var L=D(this).closest(".list-item"),N=D(L).find(".post-content");if(N.length>0){var Q=false,O=false,S=D(this).text(),M="",R=D(N).html(),P=this;D(this).on("click",function(){nodeid=D(L).attr("data-node-id");if(Q){D(P).text(S);D(N).html(R);Q=false}else{if(O){D(P).text(vBulletin.phrase.get("see_less"));Q=true;D(N).html(M)}else{if(!O&&nodeid){vBulletin.AJAX({call:"/activity/fetchText",data:{nodeid:nodeid},success:function(T){M=T.nodeText;if(M.length<=R.length){D(P).addClass("ui-helper-hidden");postLink=D(P).closest(".post-links").html().replace("<span>|</span>","");D(P).closest(".post-links").html(postLink)}else{D(N).html(M);D(P).text(vBulletin.phrase.get("see_less"));console.log("loaded content for node "+nodeid);Q=true;O=true;return false}},error:vBulletin.ajaxtools.logAjaxError,api_error:vBulletin.ajaxtools.logApiError,})}}}return false})}})};vBulletin.markreadcheck=function(){if((parseInt(pageData.threadmarking)>0)&&(parseInt(pageData.userid)>0)){return }var J=D.cookie(pageData.cookie_prefix+"lastvisit");if(parseInt(pageData.userid)>0&&(!J||pageData.lastvisit>J)){J=pageData.lastvisit}var K=Math.round(new Date().getTime()/1000),L=K-vBulletin.options.get("markinglimit")*86400;D(".forum-item").each(function(){var N=parseInt(D(this).attr("data-lastcontent")),M=0;if(N<=J){D(this).find(".icon").removeClass(".b-icon__speech-double-large--blue").addClass(".b-icon__speech-double-large--gray");return }M=vBulletin.cookie.fetchBbarrayCookie("channel_view",D(this).attr("data-channel-id"));M=M?parseInt(M):0;var O=(N>M);D(this).find(".icon").toggleClass("b-icon__speech-double-large--blue",O).toggleClass("b-icon__speech-double-large--gray",!O)});D(".subforum-item").each(function(){var N=parseInt(D(this).attr("data-lastcontent")),M=0;if(N<=J){D(this).find(".icon").removeClass("b-icon__speech-single2--blue").addClass("b-icon__speech-single2--gray");return }M=vBulletin.cookie.fetchBbarrayCookie("channel_view",D(this).attr("data-channel-id"));M=M?parseInt(M):0;var O=(N>M);D(this).find(".icon").toggleClass("b-icon__speech-single2--blue",O).toggleClass("b-icon__speech-single2--gray",!O)});D(".topic-item").each(function(){var N=parseInt(D(this).attr("data-lastcontent")),O=0,M=0,Q=0;if(pageData.userid=="0"){if(N<=J){D(this).addClass("read");return }M=vBulletin.cookie.fetchBbarrayCookie("channel_view",D(this).attr("data-channel-id"));M=M?parseInt(M):0;O=vBulletin.cookie.fetchBbarrayCookie("discussion_view",D(this).attr("data-node-id"));O=O?parseInt(O):0;Q=Math.max(M,O)}else{Q=D(this).attr("data-readtime")?parseInt(D(this).attr("data-readtime")):0;M=D(this).attr("data-channelreadtime")?parseInt(D(this).attr("data-channelreadtime")):0;Q=Math.max(Q,M,L)}if(N<=Q||D(this).hasClass("redirect")){D(this).addClass("read")}else{if(D(this).find(".topic-wrapper .js-go-to-first-unread").length==0){var P=D(this).find(".topic-wrapper .topic-title").attr("href");if(typeof (P)!="undefined"){P+=(P.indexOf("?")==-1?"?":"&amp;")+"goto=newpost";D("<a />").addClass("go-to-first-unread b-icon b-icon__double-arrow-down--blue js-go-to-first-unread").attr("href",P).attr("title",vBulletin.phrase.get("go_to_first_new_post")).html("&nbsp;").prependTo(D(this).find(".topic-wrapper"));D(this).find(".vb-icon-topic-status").attr("title",vBulletin.phrase.get("new_posts"))}}}})};vBulletin.markchannelsread=function(P,Q,M){if(parseInt(P)){vBulletin.setChannelRead(P,Q)}else{if(pageData.channelid&&parseInt(pageData.channelid)&&parseInt(pageData.threadmarking)>0&&parseInt(pageData.userid)>0){vBulletin.setChannelRead(pageData.channelid,Q)}else{var K=[],L=D(M).closest(".widget-content").find(".forum-list-container"),J=L.find(".forum-item"),O=L.find(".subforum-item");var N=function(R,T){var S=parseInt(D(T).attr("data-channel-id"),10);if(S){K.push(S)}};D.each(J,N);D.each(O,N);D.each(K,function(R,S){if(R>=K.length-1){vBulletin.setChannelRead(S,Q)}else{vBulletin.setChannelRead(S,[])}})}}};vBulletin.markRead=function(J){vBulletin.AJAX({call:"/ajax/api/node/markRead",data:{nodeid:J},success:D.noop,api_error:D.noop,error:D.noop,})};vBulletin.setChannelRead=function(K,L){var M=Math.round(new Date().getTime()/1000);success=((L.success&&typeof L.success=="function")?L.success:D.noop);if(pageData.threadmarking=="0"||!parseInt(pageData.userid)){if(K==0){D.cookie(pageData.cookie_prefix+"lastvisit",M)}else{var J;try{J=D.parseJSON(vBulletin.cookie.convertBbarrayCookie(D.cookie(pageData.cookie_prefix+"channel_view")))||{}}catch(N){J={}}J[K]=M;var O={path:pageData.cookie_path,domain:pageData.cookie_domain};O.expires=365;D.cookie(pageData.cookie_prefix+"channel_view",vBulletin.cookie.convertBbarrayCookie(JSON.stringify(J),"set"),O)}success()}else{vBulletin.AJAX({call:"/ajax/api/node/markChannelsRead",data:{nodeid:K},success:success,api_error:vBulletin.ajaxtools.logApiError})}return true};vBulletin.ckeditor=vBulletin.ckeditor||{};window.CKEDITOR_BASEPATH=pageData.baseurl+"/js/ckeditor/";vBulletin.ckeditor.requiredScriptsLoaded=false;vBulletin.ckeditor.requiredScriptsLoadFailed=false;vBulletin.ckeditor.requiredScriptLoadingStarted=false;vBulletin.ckeditor.checkEnvironment=function(){return true};vBulletin.ckeditor.fireCallbacks=function(M,K,J,L){if(J=="error"&&typeof K.error=="function"){K.error(M)}if(J=="success"&&typeof K.success=="function"){K.success.apply(L,[M,L])}if(typeof K.complete=="function"){K.complete(M)}};vBulletin.ckeditor.initEditor=function(L,K){K=K||{};L=vBulletin.ckeditor.verifyEditorId(L);console.log("Ckeditor: initEditor({0})".format(L));if(!vBulletin.ckeditor.checkEnvironment()){var J=D("#"+L).closest(".js-content-entry");J.find("li[data-panel=b-content-entry-panel__content--toggle-editor]").addClass("h-hide");J.find("li[data-panel=b-content-entry-panel__content--smiley]").addClass("h-hide");J.find("form").append(D('<input type="hidden" name="nl2br" value="1" />'));vBulletin.ckeditor.fireCallbacks(L,K,"error");return }if(vBulletin.ckeditor.requiredScriptsLoaded){vBulletin.ckeditor.doInitEditor(L,K)}else{vBulletin.ckeditor.loadScripts(L,K)}};vBulletin.ckeditor.loadScripts=function(L,K,J){if(vBulletin.ckeditor.requiredScriptLoadingStarted){console.warn("Ckeditor: Trying to load required scripts more than once.");return }vBulletin.ckeditor.requiredScriptLoadingStarted=true;K=K||{};L=L||"";if(typeof (K.hideLoadingDialog)!=="undefined"&&!K.hideLoadingDialog){vBulletin.ckeditor.showLoadingDialog(L)}var N=function(){if(K.showError||!vBulletin.ckeditor.requiredScriptsLoadFailed){vBulletin.warning("error","error_loading_ckeditor_script")}vBulletin.loadingIndicator.hide();vBulletin.ckeditor.requiredScriptsLoadFailed=true;vBulletin.ckeditor.fireCallbacks(L,K,"error")};var M=function(){if(!vBulletin.ckeditor.requiredScriptsLoadFailed){if(typeof J=="function"){J()}if(typeof vBulletin.ckeditor.doInitEditor=="function"&&window.CKEDITOR){vBulletin.ckeditor.requiredScriptsLoaded=true;vBulletin.ckeditor.doInitEditor(L,K)}else{setTimeout(M,10)}}else{vBulletin.ckeditor.fireCallbacks(L,K,"error");if(!K.hideLoadingDialog){vBulletin.ckeditor.hideLoadingDialog(L)}}};if(typeof vBulletin.ckeditor.doInitEditor!="function"&&!window.CKEDITOR){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+"/ajax/render/ckeditor_javascript",success:function(P){var O=[];var Q=/src="([^"]+)"/g;while(match=Q.exec(P)){O.push(match[1])}var R=function(){if(O.length>0){console.log("Ckeditor: Calling getScript for: {0}".format(O[0]));D.getScript(O[0],function(S,U,T){if(U!="success"){console.warn("Ckeditor: Error loading "+O[0]);N();return false}console.log("Ckeditor: Script loaded: "+O[0]);O.splice(0,1);R()}).fail(function(T,U,S){console.warn("Ckeditor: Error loading script: "+U+" Exception: "+S);N()})}else{M()}};R()},error_phrase:"error_fetching_dialog"})}else{M()}};vBulletin.ckeditor.editorExists=function(J){return false};vBulletin.ckeditor.isEditorEmpty=function(J){return true};vBulletin.ckeditor.resetEditor=function(J){return false};vBulletin.ckeditor.getEditorContent=function(K){K=vBulletin.ckeditor.verifyEditorId(K);if(!K){return false}if(vBulletin.ckeditor.editorExists(K)){var J=vBulletin.ckeditor.getEditor(K);if(J&&J.getData){return D.trim(J.getData())}else{return false}}else{return D.trim(D("#"+K).val())}};vBulletin.ckeditor.focusEditor=function(K){K=vBulletin.ckeditor.verifyEditorId(K);if(!K){return }if(vBulletin.ckeditor.editorExists(K)){var J=vBulletin.ckeditor.getEditor(K);if(J){J.focus()}}else{D("#"+K).focus()}};vBulletin.ckeditor.loadingDialogStack={};vBulletin.ckeditor.showLoadingDialog=function(J){if((typeof vBulletin.ckeditor.loadingDialogStack[J]!="undefined")&&vBulletin.ckeditor.loadingDialogStack[J]){return }vBulletin.ckeditor.loadingDialogStack[J]=true;var K=D("#"+J);if(K.length>0&&K.is(":visible")){K.prop("disabled",true)}window.vBulletin.loadingIndicator.show("vBulletin.ckeditor.showLoadingDialog editorId: "+J)};vBulletin.ckeditor.hideLoadingDialog=function(J){if((typeof vBulletin.ckeditor.loadingDialogStack[J]=="undefined")||!vBulletin.ckeditor.loadingDialogStack[J]){return }vBulletin.ckeditor.loadingDialogStack[J]=false;D("#"+J).prop("disabled",false);window.vBulletin.loadingIndicator.hide("vBulletin.ckeditor.hideLoadingDialog editorId: "+J)};vBulletin.ckeditor.generatedIdCounter=0;vBulletin.ckeditor.verifyEditorId=function(K){K=K||"";if(typeof K=="string"){return K}else{if(typeof K=="object"&&typeof K.checkDirty!="undefined"&&typeof K.name!="undefined"){return K.name}else{var J=K instanceof D?K:D(K);if(!J.attr("id")){++vBulletin.ckeditor.generatedIdCounter;J.attr("id",("vb-cke-instance-"+vBulletin.ckeditor.generatedIdCounter))}return J.attr("id")}}};vBulletin.ckeditor.initEditorComponents=function(K,J){K=K||document;D(function(){D(".js-ckeditor-init-on-focus",K).off("focus").on("focus",function(){vBulletin.ckeditor.initEditor(D(this))});D(".js-ckeditor-init-on-page-load",K).each(function(){vBulletin.ckeditor.initEditor(D(this))});if(J){return }(function(){var P=function(R){return D(".js-content-entry-post-icons option",K).filter(function(){return(D(this).val()==R)}).data("icon-url")};var Q=function(R){return D(".js-content-entry-post-icons option",K).filter(function(){return(D(this).val()==R)}).text()};var O=function(S){if(S==0){return D("<span />").html(vBulletin.phrase.get("no_icon")).get(0)}var T=P(S);if(T){var R=Q(S);return D("<img />").attr("src",T).attr("alt","").attr("title",R).get(0)}else{return""}};D(".js-content-entry-post-icons",K).selectBox().change(function(){var R=D(this).val();D(".js-content-entry-post-icons.selectBox-dropdown .selectBox-label",K).html(O(R))});D(".js-content-entry-post-icons-selectBox-dropdown-menu li a").each(function(){var R=D(this).attr("rel");D(this).html(O(R))});D(".js-content-entry-post-icons",K).trigger("change")})();D(".js-content-entry-prefixes",K).selectBox();var L=D(".js-content-entry-event-highlights-container",K),M=L.is(".h-hide-imp");if(M){L.removeClass("h-hide-imp")}D(".js-content-entry-event-highlights",K).selectBox();if(M){L.addClass("h-hide-imp")}var N=[];D(".js-select-box",K).each(function(){var O=D(this),P;while(O.is(":hidden")){P=O.closest(".h-hide");if(P.length<1){break}N.push(P);P.removeClass("h-hide")}O.selectBox()});D.each(N,function(O,P){P.addClass("h-hide")})})};vBulletin.ckeditor.initEditorComponents(document);D(".js-focus-on-page-load").first().focus();vBulletin.doReplaceSecurityToken=function(J){if(typeof (J)=="undefined"||J==""){return }D("form").each(function(){var K=D(this);if(this.action&&!vBulletin.isInternalUrl(this.action)){console.log("Skipping security token for external url (form action): "+this.action);return true}if(typeof (this.method)!="undefined"&&this.method.toLowerCase()=="post"){if(K.find('input[name="securitytoken"]').length){K.find('input[name="securitytoken"]').val(J)}else{K.append('<input type="hidden" name="securitytoken" value="'+J+'" />')}}});pageData.securitytoken=J;console.log("Securitytoken updated")};window.openAlertDialog=function(P){var O=D("#alert-dialog");P=P||{};if(!O.data("created")){O.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,dialogClass:"dialog-container alert-dialog-container dialog-box",create:function(){O.data("created",true)}})}O.dialog("option","width",P.width||500);O.dialog("option","title",P.title);var K=O.find(".dialog-content"),L=K.find(".message"),J=K.find(".icon"),N=D("#btnAlertDialogOK"),M="",Q="";if(P.maxHeight){M=P.maxHeight;Q="auto"}K.css({"max-height":M,overflow:Q});if(P.message){L.html(P.message)}J.removeClass(function(R,S){return(S.match(/b-icon\S+\b/g)||[]).join(" ")+" no-icon b-icon"});P.buttonLabel=P.buttonLabel||vBulletin.phrase.get("ok");N.html(P.buttonLabel);O.find(".js-button").toggleClass("b-button--sitebuilder",D("body").is(".edit-mode, .js-edit-mode-style"));O.off("dialogopen").on("dialogopen",function(){N.off("click").on("click",function(){if(typeof P.onBeforeClose=="function"){P.onBeforeClose.apply(this)}O.dialog("close")}).focus();O.parent(".alert-dialog-container").css("z-index","10100")});O.off("dialogclose").on("dialogclose",function(){if(typeof P.onAfterClose=="function"){P.onAfterClose.apply(N)}});switch(P.iconType){case"warning":case"error":J.addClass("b-icon b-icon__warning-l--red h-margin-right-xl");J.show();break;default:J.addClass("no-icon").hide();break}O.dialog("open");return O};vBulletin.warning=function(L,J,K){vBulletin.alert(L,J,"warning",K)};vBulletin.error=function(L,J,K){vBulletin.alert(L,J,"error",K)};vBulletin.alert=function(M,J,L,K){openAlertDialog({title:vBulletin.phrase.get(M),message:vBulletin.phrase.get(J),iconType:L,onAfterClose:K})};vBulletin.flashMessage=function(K){var J=D(".js-flash-message"),L=J.find(".js-flash-message-content");if(typeof vBulletin.flashMessage.timer=="undefined"){vBulletin.flashMessage.timer=0}if(vBulletin.flashMessage.timer){window.clearTimeout(vBulletin.flashMessage.timer)}L.text(K);J.removeClass("h-hide").show();vBulletin.flashMessage.timer=window.setTimeout(function(){J.fadeOut(function(){J.addClass("h-hide")})},5000)};window.openConfirmDialog=function(N){N=N||{};var J=D("#confirm-dialog");if(!J.data("created")){J.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,create:function(){J.data("created",true)}})}var Q=N.title;J.dialog("option","title",Q);J.closest(".ui-dialog").find(".ui-dialog-title").html(Q);var R=J.find(".dialog-content");var O=R.find(".message");var P=R.find(".icon");if(N.message){O.html(N.message.replace("\n","<br />"))}J.dialog("option","width",(N.width?N.width:500));J.dialog("option","dialogClass","dialog-container confirm-dialog-container dialog-box "+(N.dialogClass||""));P.removeClass(function(S,T){return(T.match(/b-icon\S+\b/g)||[]).join(" ")+" no-icon b-icon"});N.buttonLabel=N.buttonLabel||{};N.buttonLabel.yesLabel=N.buttonLabel.yesLabel||vBulletin.phrase.get("yes");N.buttonLabel.noLabel=N.buttonLabel.noLabel||vBulletin.phrase.get("no");var L=D("#btnConfirmDialogYes").html(N.buttonLabel.yesLabel);var M=D("#btnConfirmDialogNo").html(N.buttonLabel.noLabel);L.addClass("b-button--primary").removeClass("b-button--secondary");M.addClass("b-button--secondary").removeClass("b-button--primary");J.find(".js-button").toggleClass("b-button--sitebuilder",D("body").is(".edit-mode, .js-edit-mode-style"));var K;J.off("dialogopen").on("dialogopen",function(){var T=D("#btnConfirmDialogYes").off("click").on("click",function(){K=this;var V,U;if(typeof N.onClickYes=="function"){V=N.onClickYes.apply(this);if(typeof N.onClickYesWithAjax!="undefined"&&N.onClickYesWithAjax){return false}}if(V===false){return false}if(typeof N.onBeforeClose=="function"){U=N.onBeforeClose.apply(this);if(typeof N.onBeforeCloseWithAjax!="undefined"&&N.onBeforeCloseWithAjax){return false}}if(U===false){return false}J.dialog("close")}).focus();var S=D("#btnConfirmDialogNo").off("click").on("click",function(){K=this;if(typeof N.onClickNo=="function"){N.onClickNo.apply(this)}if(typeof N.onBeforeClose=="function"){N.onBeforeClose.apply(this)}J.dialog("close")})});J.off("dialogclose").on("dialogclose",function(T,S){if(typeof N.onAfterClose=="function"){N.onAfterClose.apply(K)}});switch(N.iconType){case"warning":P.addClass("b-icon b-icon__warning-l--red h-margin-right-xl");P.show();break;default:P.addClass("no-icon").hide();break}J.dialog("open");return J};vBulletin.openPromptDialog=function(M){var O=D("#prompt-dialog");if(!O.data("created")){O.dialog({autoOpen:false,modal:true,resizable:false,closeOnEscape:false,showCloseButton:false,width:500,dialogClass:"dialog-container prompt-dialog-container dialog-box",create:function(){O.data("created",true)}})}M=M||{};O.dialog("option","title",M.title);var R=O.find(".dialog-content"),N=R.find(".message"),P;if(M.message){N.html(M.message)}var J=M.initialValue||"";if(!M.multiline){P=O.find("input.input-box").val(J).removeClass("h-hide");P.next().addClass("h-hide");if(Number(M.maxlength)){P.attr("maxlength",Number(M.maxlength))}else{P.removeAttr("maxlength")}R.addClass("table");R.find("> div").addClass("td")}else{P=O.find("textarea.input-box").val(J).removeClass("h-hide");P.prev().addClass("h-hide");R.removeClass("table");R.find("> .td").removeClass("td")}M.buttonLabel=M.buttonLabel||{};M.buttonLabel.okLabel=M.buttonLabel.okLabel||vBulletin.phrase.get("ok");M.buttonLabel.cancelLabel=M.buttonLabel.cancelLabel||vBulletin.phrase.get("cancel");var Q=D("#btnPromptDialogOK").html(M.buttonLabel.okLabel),L=D("#btnPromptDialogCancel").html(M.buttonLabel.cancelLabel),K;O.find(".js-button").toggleClass("b-button--sitebuilder",D("body").is(".edit-mode, .js-edit-mode-style"));O.off("dialogopen").on("dialogopen",function(){var T=D("#btnPromptDialogOK").off("click").on("click",function(){K=this;var W=D.trim(P.val()),V,Z;if(M.validation&&typeof M.validation=="object"){var Y=M.validation;if(!Y.override&&Y.callback){var X=Y.callback;if(!Array.isArray(X)){X=[X]}for(i=0;i<X.length;i++){if(typeof X[i]=="function"){var U=X[i].apply(O,[P,M]);if(U!==true){if(U&&Y.showError){O.find(".js-prompt-error").html(vBulletin.phrase.get(U)).removeClass("h-hide")}P.trigger("select").trigger("focus");return false}}}}if(typeof Y.custom=="function"){if(!Y.custom.apply(this,[P])){return false}}}if(typeof M.onClickOK=="function"){Z=M.onClickOK.apply(this,[W]);if(typeof M.onClickOKWithAjax!="undefined"&&M.onClickOKWithAjax){return false}}if(Z===false){return false}if(typeof M.onBeforeClose=="function"){V=M.onBeforeClose.apply(this);if(typeof M.onBeforeCloseWithAjax!="undefined"&&M.onBeforeCloseWithAjax){return false}}if(V===false){return false}O.dialog("close")}).trigger("focus");var S=D("#btnPromptDialogCancel").off("click").on("click",function(){K=this;if(typeof M.onClickCancel=="function"){M.onClickCancel.apply(this)}if(typeof M.onBeforeClose=="function"){M.onBeforeClose.apply(this)}O.dialog("close")})});O.off("dialogclose").on("dialogclose",function(){O.find(".js-prompt-error").addClass("h-hide");if(typeof M.onAfterClose=="function"){M.onAfterClose.apply(K);P.val("")}});O.dialog("open");P.trigger("focus");return O};vBulletin.openPromptDialog.validationString=function(L,K){var J=D.trim(L.val());if(!J){return"please_enter_a_value"}else{if(K.multiline&&J.length>K.maxlength){return["message_too_long",K.maxlength]}}return true};window.openPromptDialog=vBulletin.openPromptDialog;window.openLoadingDialog=function(){console.warn("Function openLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.show("openLoadingDialog")};window.closeLoadingDialog=function(){console.warn("Function closeLoadingDialog is deprecated.");window.vBulletin.loadingIndicator.hide("closeLoadingDialog")};window.bindFormReset=function(J){return D(J).on("reset",function(K,L){if(typeof L=="function"){L()}})};window.vBulletin=window.vBulletin||{};vBulletin.sitebuilder=vBulletin.sitebuilder||{};vBulletin.sitebuilder.toggleSitebuilder=function(J){var K=D(this);if(K.hasClass("on")){D.removeCookie(pageData.sb_state_cookie,{path:pageData.cookie_path,domain:pageData.cookie_domain});D(".js-top-menu-sitebuilder").slideUp("fast");K.removeClass("on");return true}if(D(".js-top-menu-sitebuilder").length>0){D(".js-top-menu-sitebuilder").slideDown("fast");K.addClass("on");D.cookie(pageData.sb_state_cookie,"1",{path:pageData.cookie_path,domain:pageData.cookie_domain});return true}vBulletin.sitebuilder.loadSitebuilderMarkup(true);return true};vBulletin.sitebuilder.loadSitebuilderMarkup=function(J,L){J=J||false;function K(){if(typeof L=="function"){return L()}}if(D("#sitebuilder-wrapper").is(".js-sb-loaded")){return K()}vBulletin.AJAX({call:"/ajax/activate-sitebuilder",data:{pageid:pageData.pageid,nodeid:pageData.nodeid,userid:pageData.userid,loadMenu:J,isAjaxTemplateRender:true,isAjaxTemplateRenderWithData:true,},cache:false,success:function(M){console.log(M,J);if(M&&M.templates){if(J){D("head").append(M.templates.css);D(".js-top-menu-sitebuilder--list").hide().html(M.templates.menu)}D("#sitebuilder-wrapper").prepend(M.templates.main);D(".js-top-menu-sitebuilder").show();D(".edit-switch-container .switch-control").addClass("on");D("#sitebuilder-wrapper").addClass("js-sb-loaded");D.cookie(pageData.sb_state_cookie,"1",{path:pageData.cookie_path,domain:pageData.cookie_domain});return K()}},})};vBulletin.sitebuilder.menuClickProxy=function(){var J=this;vBulletin.sitebuilder.loadSitebuilderMarkup(false,function(){D(".js-top-menu-sitebuilder--list .js-top-menu-link:not(.js-top-menu-tab--admincp)").off("click",vBulletin.sitebuilder.menuClickProxy);D(J).click()});return false};if(typeof (tzOffset)!="undefined"){var H=new Date().getTimezoneOffset()/60;if(Math.abs(tzOffset+H)==1){vBulletin.AJAX({call:"/profile/save-dst",data:{userid:pageData.userid,clientUtcOffset:H},success:function(){window.location.reload()},api_error:D.noop,error:D.noop})}}function I(J,N){var L=0,K=J.length;function M(){if(L==K){N()}}J.each(function(){if(this.complete&&this.naturalHeight>0&&this.src){++L}else{D(this).one("load",function(){++L;M()})}});M()}function G(M,L,O,P,J){function K(R){var T=R.position().top+R.outerHeight(),S=Math.round(T);return[S-1,S,(S+1)]}function Q(U,T){var S,R;for(S in U){for(R in T){if(U[S]===T[R]){return true}}}return false}function N(){var a=D(this);a.trigger("vbulletin:flexgridstart",{isResize:J});var W=D(L,a),S=W.last(),Y=false,Z={},X=0,V=false,U=false,T="vb-temp-placeholder-grid-lastrow",R=W.first();if(!W.length){return }W.removeClass(O+" "+T);W.removeClass(P);setTimeout(function(){Y=K(S);W.each(function(){var c=D(this),d=K(c);if(Q(Y,d)){c.addClass(T)}else{if(!V){V=d}if(!Q(V,d)){++X;R.addClass(P)}V=d;R=c;if(typeof Z[X]=="undefined"){Z[X]=0}++Z[X]}});if(R!=W.first()){R.addClass(P)}D.each(Z,function(c,d){if(U===false){U=d}if(d<U){U=d}});var b=W.filter("."+T);b.removeClass(T);if(U===false||b.length<U){b.addClass(O)}if(U!==false&&b.length==U){b.last().addClass(P)}a.trigger("vbulletin:flexgridready",{isResize:J})},0)}D(M).each(N)}function F(O,K,P,M,N,L,J){D(O).each(function(){var Q=D(this),R=D(P,Q);if(L){G(Q,K,M,N,J)}else{I(R,function(){G(Q,K,M,N,J)})}})}vBulletin.initFlexGridFixLastRowAll=function(J){J=(typeof J=="undefined")?false:J;function K(L){F(".js-flexgrid",".js-flexgrid-item",".js-flexgrid-image","b-flexgrid__item--lastrow","b-flexgrid__item--lastinrow",true,L);F(".js-photo-preview",".b-gallery-thumbnail-list__item",".b-gallery-thumbnail-list__thumbnail","b-gallery-thumbnail-list__item--lastrow","b-gallery-thumbnail-list__item--lastinrow",false,L)}K(J);vBulletin.Responsive.Debounce.registerCallbackOnce(function(){K(true)})};function A(L,Q){function M(R,W,V){var U={},S,X,T,c,e,f,h=[],Z,d,Y;Z=4*8;d=R.data.length-Z;Y=R.data;for(X=0;X<d;X+=Z){T=Math.round(Y[X]/W);c=Math.round(Y[X+1]/W);e=Math.round(Y[X+2]/W);f=Math.round(Y[X+3]/W);S=T+(c*100)+(e*10000)+(f*1000000);if(!U[S]){U[S]=1}else{++U[S]}}for(X in U){h.push([X,U[X]])}h.sort(function(j,g){return j[1]>g[1]?-1:(g[1]>j[1]?1:0)});if(h.length>V){h=h.slice(0,V)}return h}function K(V){var U,T,R,S;S=Math.floor(V/1000000);R=Math.floor(V/10000)-(S*100);T=Math.floor(V/100)-(S*10000)-(R*100);U=V-(S*1000000)-(R*10000)-(T*100);return[U,T,R,S]}function P(Z,Y){var X,W,S,V,c,T,R,U;X=K(Z[0]);W=K(Y[0]);S=Math.min(X[0],X[1],X[2]);V=Math.max(X[0],X[1],X[2]);c=Math.min(W[0],W[1],W[2]);T=Math.max(W[0],W[1],W[2]);R=V-S;U=T-c;return R>U?-1:(U>R?1:0)}function J(S,R){var T,W,V=0,U=0;T=K(S[0]);W=K(R[0]);if(T[0]!=T[1]){++V}if(T[0]!=T[2]){++V}if(T[1]!=T[2]){++V}if(W[0]!=W[1]){++U}if(W[0]!=W[2]){++U}if(W[1]!=W[2]){++U}return V>U?-1:(U>V?1:0)}function O(R,V,Z){var c=192,d=255,U=300;U=300;while(true){if(!--U){break}if((R>=d||V>=d||Z>=d)||(R>=c&&V>=c&&Z>=c)){break}++R;++V;++Z}if(R<c||V<c||Z<c){var T=d-R,S=d-V,X=d-Z,W=Math.max(T,S,X),a=T/W,Y=S/W,e=X/W;U=300;while(true){if(!--U){break}R+=a;V+=Y;Z+=e;if(R>=c&&V>=c&&Z>=c){break}}R=parseInt(Math.round(R),10);V=parseInt(Math.round(V),10);Z=parseInt(Math.round(Z),10)}return{r:R,g:V,b:Z}}function N(h){var W=D(Q,h),f=h.innerWidth(),j=h.innerHeight(),c=W.outerWidth(),Z=W.outerHeight();if(!W.length){return }if(c>=f&&Z>=j){return }var V=W.get(0),T=document.createElement("canvas"),S=T.getContext&&T.getContext("2d"),U=V.naturalWidth||c,Y=V.naturalHeight||Z,R=false;T.width=U;T.height=Y;S.drawImage(V,0,0);try{R=S.getImageData(0,0,U,Y)}catch(b){}if(!R||!R.data||!R.data.length){return }var X=20,a=100,g,d;g=M(R,X,a);g.sort(P);g.sort(J);d=g.shift();d=K(d[0]);d[0]=d[0]*X;d[1]=d[1]*X;d[2]=d[2]*X;d[3]=d[3]*X;if(d[3]>=245){d[3]=255}h.css("backgroundColor","rgba("+d.join(",")+")")}D(L).each(function(R){var T=D(this),S=D(Q,T);if(S.length){setTimeout(function(){I(S,function(){N(T)})},0)}})}vBulletin.initFrameImagesWithColor=function(){A(".js-frame-image-wrapper",".js-frame-image")};function E(){function K(){var O=D(this),N=O.prop("title");if(N==""){var M=O.get(0);if(M.scrollWidth>M.clientWidth){var L=O.text().trim();if(L.length>300){L=L.substr(0,297)+"..."}O.prop("title",L)}}O.addClass("js-ellipsis-has-title")}var J=".ellipsis:not(.js-ellipsis-has-title)";D(document).off("mouseover",J,K).on("mouseover",J,K)}vBulletin.instrument=function(K){var J=function(O){var M=O.data("action"),N=!O.is(":checked"),L=D(document).find(O.data("on"));if(M=="invisible"){L.toggleClass("h-invisible",N)}else{if(M=="hide"){L.toggleClass("h-hide-imp",N)}else{L.find(":input").addBack(":input").prop("disabled",N);L.find("select").addBack("select").selectBox((N?"disable":"enable"))}}};K.find("input.js-dependent-master").each(function(){var N=D(this),M=N.attr("type"),L=function(){J(N)};if(M=="checkbox"){N.on("change",L)}else{if(M=="radio"){N.closest("form").find('input[name="'+N.attr("name")+'"]').on("change",L)}}})};setTimeout(function(){if(!D.support.selectstart){D.fn.extend({disableSelection:function(){return this.each(function(){D(this).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-khtml-user-select":"none","-o-user-select":"none","user-select":"none"})})},enableSelection:function(){return this.each(function(){D(this).css({"-moz-user-select":"","-webkit-user-select":"","-khtml-user-select":"","-o-user-select":"","user-select":""})})}})}function K(){window.vBulletin.loadingIndicator.init();D(document).off("click","a.animate-scroll").on("click","a.animate-scroll",function(){var S=vBulletin.scrollToAnchor(this.hash);if(S){window.location.href=this.href}return false});var Q=function(S){D(this).closest(".split-button").toggleClass("open").find(".submenu").toggleClass("h-hide");D("body").off("click.buttonset").on("click.buttonset",function(T){if(D(T.target).closest(".split-button").length==0){D(".split-button").removeClass("open").find(".submenu").addClass("h-hide");D("body").off("click.buttonset")}})};D(".split-button .button-text").button().closest(".button-set").find(".js-button__icon").button({text:false,icons:{primary:"vb-icon vb-icon-triangle-down-wide"}}).on("click",Q).closest(".button-set").buttonset().filter(".one-click").find(".button-text").on("click",Q);var P=vBulletin.storagetools.create("collapse");D(document).off("click",".canvas-widget .toggle-button").on("click",".canvas-widget .toggle-button",function(Y,S){var X=D(this),Z=X.closest(".canvas-widget"),T=D(".widget-content",Z),W=Z.data("widget-instance-id"),V=X.closest(".edit-mode").length;if(X.hasClass("expand")){Z.removeClass("collapsed");if(S){T.show()}else{T.slideDown("slow")}if(!V){P.unset(W)}}else{if(S){T.hide();Z.addClass("collapsed")}else{T.slideUp("slow",function(){Z.addClass("collapsed")})}if(!V){P.set(W,1)}}X.toggleClass("collapse expand");var U=X.attr("title");X.attr("title",X.data("toggle-title")).data("toggle-title",U);return false});(function(){var S=P.getAll("collapse");if(S&&S!=null){D.each(S,function(T,U){D("#widget_"+T+":not(.widget-no-header-buttons) .widget-header .toggle-button").trigger("click",[true])})}})();D(".conversation-toolbar-wrapper form.toolbar-filter-overlay").trigger("reset");if(D("textarea.autogrow").length>0){D("textarea.autogrow").elastic().off("blur.elastic")}D(".edit-switch-container .switch-control").on("click",vBulletin.sitebuilder.toggleSitebuilder);D(".js-top-menu-sitebuilder--list .js-top-menu-link:not(.js-top-menu-tab--admincp)").removeClass("b-top-menu__item-link--disabled").on("click",vBulletin.sitebuilder.menuClickProxy);D("select.custom-dropdown").selectBox();D(document).off("keypress",".js-button").on("keypress",".js-button",function(S){if(S.which==32||S.which==13){if(S.target&&S.target.nodeName&&(S.target.nodeName+"").toLowerCase()=="label"&&D(S.target).find("input").length==1){D(S.target).find("input").trigger("click")}else{D(this).trigger("click")}S.preventDefault()}});D(document).off("keypress",".js-link").on("keypress",".js-link",function(S){if(S.which==13){D(this).trigger("click");S.preventDefault()}});D(".js-debug-collapse-list").next("ol, ul").hide();D(document).off("click",".js-debug-collapse-list").on("click",".js-debug-collapse-list",function(S){D(this).next("ol, ul").toggle()});D(document).off("click",".js-toggle-slider").on("click",".js-toggle-slider",function(){var V=D(this);if(V.is(".b-toggle-slider--yes")){V.removeClass("b-toggle-slider--yes").addClass("b-toggle-slider--no");V.find(".b-toggle-slider__radio--no").prop("checked",true);V.data("value","0")}else{V.removeClass("b-toggle-slider--no").addClass("b-toggle-slider--yes");V.find(".b-toggle-slider__radio--yes").prop("checked",true);V.data("value","1")}var U=D(".js-toggle-slider, .js-toggle-slider__dependent"),S=U.index(V),T=false;U.each(function(W,X){if(W==S){T=true}else{if(T==true){var Y=D(this);if(Y.is(".js-toggle-slider__dependent")){Y.toggleClass("h-hide")}else{T=false;return false}}}});V.trigger("change",V.data("value"));return false});D(".js-select-box").selectBox();D(".mainmenu li:has(.submenu)").on("click",function(S){D(".submenu",this).show();return false}).hover(function(){},function(S){D(".submenu",this).hide()});D(".mainmenu.textControls li").on("click",function(S){if(D(".tagCtrl",this).length==0){D("#tag-dialog").hide()}});D(".mainmenu .submenu li a").on("click",function(T){var S=D(this).closest(".js-comp-menu-dropdown");if(S.length){S.removeClass("b-comp-menu-dropdown--open")}else{D(this).closest(".submenu").hide()}});D(".channel-content-widget .new-conversation-btn").off("click").on("click",function(){window.location.href=pageData.baseurl+"/new-content/"+pageData.channelid});D(".pagenav-form").submit(function(){if(Number(this.page.value)>0){location.href=this.action+"&p="+this.page.value}return false}).trigger("reset");D(".toolbar-pagenav").off("keydown",".toolbar-pagenav input").on("keydown",".toolbar-pagenav input",function(T){var S=T.which;if(!T.shiftKey&&!T.altKey&&!T.ctrlKey&&((S>=48&&S<=57)||(S>=96&&S<=105)||S==8||S==9||S==13||S==35||S==36||S==37||S==39||S==46||S==45)){return true}return false});D(document).off("click",".js-post__manage").on("click",".js-post__manage",function(){if(typeof vBulletin.inlinemod=="undefined"){var T=vBulletin.getAjaxBaseurl()+"/js/inlinemod.js?v="+pageData.simpleversion,S=this;D.getScript(T,function(){vBulletin.inlinemod.manage_deleted_form.apply(S)}).error(function(){vBulletin.warning("error","error_loading_inlinemod_script")})}else{vBulletin.inlinemod.manage_deleted_form.apply(this)}});D(document).off("click",".js-post__show-hide").on("click",".js-post__show-hide",function(){var U=D(this),T=U.text(),S=U.data("toggle-text");if(U.hasClass("js-post__show-hide--show")){U.closest(".js-post").addClass("b-post--show-deleted-content");U.html(S).data("toggle-text",T).removeClass("js-post__show-hide--show")}else{U.closest(".js-post").removeClass("b-post--show-deleted-content");U.html(S).data("toggle-text",T).addClass("js-post__show-hide--show")}});D(document).off("click","a.video-frame").on("click","a.video-frame",function(U){U.preventDefault();var T={code:this.getAttribute("data-vcode"),provider:this.getAttribute("data-vprovider")};if(this.getAttribute("data-height")){T.height=this.getAttribute("data-height")}if(this.getAttribute("data-width")){T.width=this.getAttribute("data-width")}var S=D(this);D.post(vBulletin.getAjaxBaseurl()+"/ajax/render/bbcode_video",T,function(V){if(V){S.replaceWith(V)}},"json")});vBulletin.markreadcheck();D(document).off("click","a.markchannelsread, a.navbar_mark_channels_read").on("click","a.markchannelsread, a.navbar_mark_channels_read",function(){vBulletin.markchannelsread(0,{success:function(){location.reload()},},D(this));return false});D(".js-footer-go-to-top").off("click").on("click",function(S){S.preventDefault();D("body,html").animate({scrollTop:0},800)});vBulletin.instrument(D(document));D("input.js-select-all-master").on("change",function(){var S=D(this);$list=D(document).find(S.data("list"));$list.prop("checked",S.is(":checked"))});function O(U){vBulletin.flashMessage(U);var S=window.location.href,W,X,V;W=S.split("?");X=W[1];W=X.split("#");X=W[0];if(X.match(/&flashmsg=msg-[a-z0-9_-]+/i)){V=S.replace(/&flashmsg=msg-[a-z0-9_-]+/i,"")}else{if(X.match(/flashmsg=msg-[a-z0-9_-]+&/i)){V=S.replace(/flashmsg=msg-[a-z0-9_-]+&/i,"")}else{if(X.match(/^flashmsg=msg-[a-z0-9_-]+$/i)){V=S.replace(/\?flashmsg=msg-[a-z0-9_-]+/i,"")}}}var T=document.title;History.replaceState({},T,V);document.title=T}if(pageData.flash_message){O(pageData.flash_message)}D("input[placeholder]").each(function(){var U=D(this),S=U.attr("placeholder"),T="aria-label";if(S&&!U.attr(T)){U.attr(T,S)}});function R(){D(".js-full-height").each(function(){var S=D(this),T=S.parent();S.css("height","");S.outerHeight(Math.floor(T.height()),true)})}R();vBulletin.Responsive.Debounce.registerCallbackOnce(R);D(document).off("vb-filterposts",R).on("vb-filterposts",R)}function L(){window.clearTimeout(securitytoken_timeout);if(pageData.securitytoken!="guest"){securitytoken_timeout=window.setTimeout(L,3600000);var O=function(){if(++securitytoken_errors==3){vBulletin.doReplaceSecurityToken("guest")}};vBulletin.AJAX({call:"/ajax/replace-securitytoken",data:{securitytoken:pageData.securitytoken},success:function(P){securitytoken_errors=0;vBulletin.doReplaceSecurityToken(P.newtoken)},api_error:O,error:O,})}}function J(){if(typeof (pageData.adminAction)!="undefined"){vBulletin.assertUserHasAdminPermission("canusesitebuilder",self,D.noop,function(){window.location.reload()})}if(vBulletin.options.get("crontab")){if(pageData.nextcron<=pageData.current_server_datetime){vBulletin.loadingIndicator.suppressNextAjaxIndicator();vBulletin.AJAX({call:"/ajax/apidetach/cron/run",api_error:D.noop,error:vBulletin.ajaxtools.logAjaxError})}}}K();D("#searchPopupControl").on("click",function(O){if(D(this).hasClass("open")){D(this).removeClass("open");D("#searchPopupContent").hide()}else{D(this).addClass("open");D("#searchPopupContent").show()}});D("html").on("click",function(O){if(D(O.target).closest("#searchForm").size()==0&&D("#searchPopupControl").hasClass("open")){D("#searchPopupControl").removeClass("open");D("#searchPopupContent").hide()}});D("#btnAdvSearch").off("click").on("click",function(P){P.preventDefault();D(this).data("clicked2submit",1);var O=D("#searchForm");D('<input type="hidden" name="AdvSearch" value="1" />').appendTo(O);O.submit()});D("#searchForm").off("submit.searchform").on("submit.searchform",function(U){var W=D(this),T={},P=W.find("#q"),R=D.trim(P.val());if(R.length>0){T.keywords=R}else{if(!D("#btnAdvSearch").data("clicked2submit")){vBulletin.warning("search","please_provide_search_string",function(){P.focus()});U.stopPropagation();return false}}var V=W.find(".searchPopupBody"),Q=V.find(".searchFields_title_only");if(Q.size()>0&&Q.prop("checked")){T.title_only=1}var O=V.find(".searchFields_author");if(O.size()>0&&O.prop("checked")){T.author=[O.val()]}var S=V.find(".searchFields_channel");if(S.size()>0&&S.prop("checked")){T.channel=[S.val()]}W.find("input[name=searchJSON]").val(JSON.stringify(T));return true});var M,N=pageData.cookie_prefix+"np_notices_displayed";if(!(M=D.cookie(N))){M=new Array()}if(!(M instanceof Array)){M=new Array(M)}D('ul.notices li[data-notice-persistent="0"]').each(function(O){M.push(D(this).attr("data-notice-id"))});if(M.length>0){M=null}D.cookie(N,M,{path:pageData.cookie_path,domain:pageData.cookie_domain});D("ul.notices > li > .close").off("click").on("click",function(O){var Q=D(this).closest("li"),P=Q.attr("data-notice-id");vBulletin.AJAX({call:"/ajax/api/notice/dismiss",data:{noticeid:P},success:function(R){Q.hide("slow",function(){var S=D(this).parent();if(S.find(">li:visible").length==0){S.addClass("h-hide")}})}})});D("#frmActivateuser").ajaxForm({dataType:"json",beforeSubmit:function(R,Q,P){var O="",S="";if(D.trim(D(".username",Q).val())==""){O=vBulletin.phrase.get("please_enter_a_username");S=".username"}else{if(D.trim(D(".activateid",Q).val())==""){O=vBulletin.phrase.get("requiredfieldmissing",vBulletin.phrase.get("activation_code"));S=".activateid"}}if(O){openAlertDialog({title:vBulletin.phrase.get("error"),message:O,iconType:"warning",onAfterClose:function(){D(S,Q).focus()}});return false}return true},success:function(Q,S,T,P){if(Q&&Q.response&&Q.response.errors){var U=[];for(var O in Q.response.errors){if(Q.response.errors[O][0]!="exception_trace"&&Q.response.errors[O][0]!="errormsg"){U.push(vBulletin.phrase.get(Q.response.errors[O]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:U.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var R=Q.response.msg_params;R.unshift(Q.response.msg);openAlertDialog({title:vBulletin.phrase.get("activate_your_account"),message:vBulletin.phrase.get.apply(vBulletin.phrase,R),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});D("#frmActivateemail").ajaxForm({dataType:"json",beforeSubmit:function(R,Q,P){var O="",S="";if(D.trim(D(".email",Q).val())==""){O=vBulletin.phrase.get("please_enter_your_email_address")}else{if(!isValidEmailAddress(D(".email",Q).val())){O=vBulletin.phrase.get("invalid_email_address")}}if(O){openAlertDialog({title:vBulletin.phrase.get("error"),message:O,iconType:"warning",onAfterClose:function(){D(S,Q).focus()}});return false}return true},success:function(Q,S,T,P){if(Q&&Q.response&&Q.response.errors){var U=[];for(var O in Q.response.errors){if(Q.response.errors[O][0]!="exception_trace"&&Q.response.errors[O][0]!="errormsg"){U.push(vBulletin.phrase.get(Q.response.errors[O]))}}openAlertDialog({title:vBulletin.phrase.get("error"),message:U.join("<br />"),iconType:"warning",onAfterClose:function(){vBulletin.hv.reset(true)}})}else{var R=Q.response.msg_params;R.unshift(Q.response.msg);openAlertDialog({title:vBulletin.phrase.get("email_activation_codes"),message:vBulletin.phrase.get.apply(vBulletin.phrase,R),onAfterClose:function(){window.location.href=pageData.baseurl}})}}});D(".js-stylechooser a").off("click").on("click",function(){var O=D(this).data("styleid"),P=new Date();P.setDate(P.getDate()+365);D.cookie(pageData.cookie_prefix+"userstyleid",O,{path:pageData.cookie_path,domain:pageData.cookie_domain,expires:P});if(pageData.userid){var Q={userid:pageData.userid,password:"",user:{styleid:O},options:[""],adminoptions:[""],userfield:[""],};vBulletin.loadingIndicator.suppressNextAjaxIndicator();vBulletin.AJAX({call:"/ajax/apidetach/user/save",data:Q,success:function(){window.location.reload()},})}else{window.location.reload()}return false});D(".js-languagechooser a").off("click").on("click",function(){var O=D(this).data("languageid"),P=new Date();P.setDate(P.getDate()+365);D.cookie(pageData.cookie_prefix+"languageid",O,{path:pageData.cookie_path,domain:pageData.cookie_domain,expires:P});window.location.reload();return false});D("a.navbar_profile").on("click",function(){if(pageData.userid=="0"){D("#lnkLoginSignupMenu").click();return false}});vBulletin.doReplaceSecurityToken(pageData.securitytoken);securitytoken_timeout=window.setTimeout(L,3600000);securitytoken_errors=0;vBulletin.initFlexGridFixLastRowAll();vBulletin.initFrameImagesWithColor();E();setTimeout(J,5)},1);vBulletin.getQueryString=function(K){if(K==""){return{}}var J={};for(var L=0;L<K.length;++L){var M=K[L].split("=");if(M.length!=2){continue}J[M[0]]=decodeURIComponent(M[1].replace(/\+/g," "))}return J};vBulletin.triggerHandler=function(J,L,M){if(!L||L.length==0){L=D(document)}else{if(!(L instanceof D)){L=D(L)}}M=M||[];var K=D.Event(J);K.target=this instanceof D?this.get(0):this;return L.triggerHandler(K,M)}})(jQuery);function JShtmlEncode(B){var A="";if(B&&typeof B!=="undefined"&&B.length>0){A=$("<div/>").text(B).html()}A=String(A).replace(/"/g,"&quot;");return A}function isValidEmailAddress(B){var A=new RegExp(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i);return A.test(B)}function str_repeat(D,C){var B="";for(var A=0;A<C;A++){B=B.concat(D)}return B}function showStatusMessage(A,F){var C=$(".conversation-status-message.notice"),E;if(C.length>0){var B=C.filter("."+F);if(B.length==1){C=B}else{if((E=C.filter(".h-hide")).length==1){C=E}else{C=C.first().clone().removeClass().addClass("conversation-status-message notice").appendTo(".conversation-status-messages")}}C=(B.length==1?B:C).show();if(!vBulletin.isScrolledIntoView(C)){var D=C.offset().top-10;C.hide();$("html,body").animate({scrollTop:D},"slow",function(){C.find("span").html(A).end().addClass(F+" show-x").fadeIn("slow","linear")})}else{if(C.hasClass("h-hide")){C.hide().removeClass("h-hide").addClass(F+" show-x").find("span").html(A).end().fadeIn(800,"linear")}else{C.fadeOut("slow","linear",function(){C.find("span").html(A).end().addClass(F+" show-x").fadeIn("slow","linear")})}}}}window.vBulletin.htmlEntities=function(A){return String(A).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};window.vBulletin.htmlEntities_decode=function(A){return String(A).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')};window.vBulletin.loadedIds=window.vBulletin.loadedIds||[];window.vBulletin.isAlreadyLoaded=function(A){if($.inArray(A,window.vBulletin.loadedIds)!=-1){return true}window.vBulletin.loadedIds.push(A)};